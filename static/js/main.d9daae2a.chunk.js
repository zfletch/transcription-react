(this["webpackJsonptranscription-react"]=this["webpackJsonptranscription-react"]||[]).push([[0],[,,,function(e,t,n){e.exports={xml:"Xml_xml__1n50u",line:"Xml_line__2gipS",active:"Xml_active__1XIyg",bracket:"Xml_bracket__rKg-A",element:"Xml_element__3P9um",attribute:"Xml_attribute__n_pW3",attributeText:"Xml_attributeText__2X5Ok"}},function(e,t,n){e.exports={container:"Viewer_container__3i4A8",header:"Viewer_header__34LO6",viewer:"Viewer_viewer__1Spx5",box:"Viewer_box__3pcwy",active:"Viewer_active__3yomw",select:"Viewer_select__il19s"}},,function(e,t,n){e.exports={editor:"Editor_editor__2aEyo"}},function(e,t,n){e.exports={navigator:"Navigator_navigator__3gcbv",image:"Navigator_image__3ITwa"}},,function(e,t,n){e.exports={scrollbox:"ScrollBox_scrollbox__FX24s"}},function(e,t,n){e.exports={transcription:"App_transcription__1Qfh6"}},,,,,,function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(1),a=n.n(i),o=n(8),s=n.n(o),r=Object(i.createContext)();r.displayName="TranscriptionContext";var u=r,b=n(6),j=n.n(b),x=function(e){var t=e.boxes,n=e.zoom,i=e.setBoxes,a=e.setZoom,o=e.activeBox,s=e.setActiveBox,r=null===o?null:t[o],u=function(e,n,c){var a=n.target.value,s={x:r.x,y:r.y,height:r.height,width:r.width,text:r.text};s[e]=c?c(a):a;var u=t.map((function(e,t){return t===o?s:e}));i(u)},b=function(e){var t=e.target.value;a(t)};return r?Object(c.jsxs)("div",{className:j.a.editor,children:["Text:",Object(c.jsx)("input",{type:"text",onChange:function(e){return u("text",e)},value:r.text||""}),Object(c.jsx)("br",{}),"X:",Object(c.jsx)("input",{type:"number",max:"1",min:"0",step:"0.0001",onChange:function(e){return u("x",e,parseFloat)},value:r.x.toFixed(4)||"0"}),Object(c.jsx)("br",{}),"Y:",Object(c.jsx)("input",{type:"number",max:"1",min:"0",step:"0.0001",onChange:function(e){return u("y",e,parseFloat)},value:r.y.toFixed(4)||"0"}),Object(c.jsx)("br",{}),"Width:",Object(c.jsx)("input",{type:"number",max:"1",min:"0",step:"0.0001",onChange:function(e){return u("width",e,parseFloat)},value:r.width.toFixed(4)||"0"}),Object(c.jsx)("br",{}),"Height:",Object(c.jsx)("input",{type:"number",max:"1",min:"0",step:"0.0001",onChange:function(e){return u("height",e,parseFloat)},value:r.height.toFixed(4)||"0"}),Object(c.jsx)("br",{}),"Delete:",Object(c.jsx)("input",{type:"button",onClick:function(){var e=t.filter((function(e,t){return t!==o}));i(e),s(null)},value:"Delete"}),Object(c.jsx)("br",{}),"Zoom (",n,"):",Object(c.jsx)("input",{type:"range",min:"1",max:"5",onChange:b,value:n})]}):Object(c.jsxs)("div",{className:j.a.editor,children:["Zoom (",n,"):",Object(c.jsx)("input",{type:"range",min:"1",max:"5",onChange:b,value:n})]})},l=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.boxes,n=e.setBoxes,i=e.zoom,a=e.setZoom,o=e.activeBox,s=e.setActiveBox;return Object(c.jsx)(x,{boxes:t,setBoxes:n,zoom:i,setZoom:a,activeBox:o,setActiveBox:s})}})},h=n(2),v=n(9),O=n.n(v),f=function(e,t){return e>t?e:t},m=function(e,t){return e<t?e:t},d=function(e,t,n,c,i,a,o,s,r){return c?{left:e*(a/c)+s,top:t*(a/c)+r,width:"".concat(a/n,"px"),height:"".concat(i/n/c*a,"px")}:{}},p=function(e){var t=e.x,n=e.y,a=e.zoom,o=e.width,s=e.height,r=e.localWidth,u=e.localHeight,b=e.offsetLeft,j=e.offsetTop,x=e.setX,l=e.setY,v=Object(i.useState)(!1),p=Object(h.a)(v,2),g=p[0],_=p[1],w=Object(i.useState)(null),y=Object(h.a)(w,2),S=y[0],B=y[1],N=Object(i.useState)(null),X=Object(h.a)(N,2),z=X[0],C=X[1],k=function(e){var t=e.clientX,n=e.clientY;if(g){var c=r/a,i=s/a/o*r,j=(2*b+r)/r,h=m(f(t*j-S,0),o/r*(r-c)),v=m(f(n*j-z,0),o/r*(u-i));x(h),l(v)}};return Object(i.useEffect)((function(){var e=function(){return _(!1)};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[]),Object(i.useEffect)((function(){return window.addEventListener("mousemove",k),function(){window.removeEventListener("mousemove",k)}}),[g]),Object(i.useEffect)((function(){var e=r/a,c=s/a/o*r,i=m(f(t,0),o/r*(r-e)),b=m(f(n,0),o/r*(u-c));i===t&&b===n||(x(i),l(b))}),[u,r,b,j]),Object(c.jsx)("div",{style:d(t,n,a,o,s,r,0,b,j),className:O.a.scrollbox,onMouseDown:function(e){var c=e.clientX,i=e.clientY,a=(2*b+r)/r;B(c*a-t),C(i*a-n),_(!0)}})},g=n(7),_=n.n(g),w=function(e){var t=e.image,n=e.x,a=e.y,o=e.zoom,s=e.width,r=e.height,u=e.setX,b=e.setY,j=e.setRatio,x=Object(i.useRef)(null),l=Object(i.useRef)(null),v=Object(i.useState)(null),O=Object(h.a)(v,2),f=O[0],m=O[1],d=Object(i.useState)(null),g=Object(h.a)(d,2),w=g[0],y=g[1],S=Object(i.useState)(null),B=Object(h.a)(S,2),N=B[0],X=B[1],z=Object(i.useState)(null),C=Object(h.a)(z,2),k=C[0],A=C[1];return Object(i.useEffect)((function(){var e=x.current,t=l.current,n=function(){var e=t.clientHeight,n=t.clientWidth,c=t.offsetLeft,i=t.offsetTop;m(e),y(n),X(c),A(i),j(e/n)};n();var c=new ResizeObserver(n);return c.observe(e),c.observe(t),function(){c.unobserve(e),c.unobserve(t)}}),[]),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:_.a.navigator,ref:x,children:[Object(c.jsx)("img",{src:t,ref:l,className:_.a.image}),Object(c.jsx)(p,{x:n,y:a,zoom:o,width:s,height:r,localHeight:f,localWidth:w,setX:u,setY:b,offsetLeft:N,offsetTop:k})]})})},y=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.image,n=e.x,i=e.y,a=e.zoom,o=e.height,s=e.width,r=e.setX,u=e.setY,b=e.setRatio;return Object(c.jsx)(w,{image:t,x:n,y:i,zoom:a,height:o,width:s,setX:r,setY:u,setRatio:b})}})},S=n(4),B=n.n(S),N=function(e){var t=e.image,n=e.x,a=e.y,o=e.width,s=(e.height,e.zoom),r=e.boxes,u=e.ratio,b=e.setWidth,j=e.setHeight,x=e.setBoxes,l=e.activeBox,v=e.setActiveBox,O=Object(i.useState)(!1),f=Object(h.a)(O,2),m=f[0],d=f[1],p=Object(i.useState)(null),g=Object(h.a)(p,2),_=g[0],w=g[1],y=Object(i.useState)(null),S=Object(h.a)(y,2),N=S[0],X=S[1],z=Object(i.useState)(0),C=Object(h.a)(z,2),k=C[0],A=C[1],E=Object(i.useState)(0),F=Object(h.a)(E,2),W=F[0],Y=F[1],M=Object(i.useState)(0),H=Object(h.a)(M,2),L=H[0],R=H[1],T=Object(i.useState)(0),V=Object(h.a)(T,2),Z=V[0],D=V[1],I=Object(i.useRef)(null);Object(i.useEffect)((function(){var e=I.current,t=function(){var t=e.clientHeight,n=e.clientWidth;j(t),b(n),R(e.offsetLeft),D(e.offsetTop)},n=new ResizeObserver(t);return t(),n.observe(e),function(){n.unobserve(e)}}),[]);var J={backgroundImage:"url(".concat(t,")"),backgroundPosition:"-".concat(s*n,"px -").concat(s*a,"px"),backgroundSize:"".concat(100*s,"%")};return Object(c.jsx)("div",{className:B.a.container,children:Object(c.jsxs)("div",{ref:I,className:B.a.viewer,style:J,onMouseDown:function(e){var t=e.clientX,n=e.clientY;w(t-L),X(n-Z),d(!0)},onMouseMove:function(e){var t=e.clientX,n=e.clientY;m&&(A(t-_-L),Y(n-N-Z))},onMouseUp:function(){if(W&&k){var e=W<0?N+W:N,t=k<0?_+k:_,c=r.concat({y:(e+a*s)/(o*u*s),x:(t+n*s)/(o*s),height:Math.abs(W)/(o*u*s),width:Math.abs(k)/(o*s)});x(c),d(!1),A(null),Y(null),v(c.length-1)}},children:[function(){if(!m)return!1;var e={top:W<0?N+W:N,left:k<0?_+k:_,height:"".concat(Math.abs(W),"px"),width:"".concat(Math.abs(k),"px")};return Object(c.jsx)("div",{style:e,className:B.a.select})}(),r.map((function(e,t){return function(e,t){var i=e.x,r=e.y,b=e.width,j=e.height,x={top:"".concat(r*u*o*s-a*s,"px"),left:"".concat(i*o*s-n*s,"px"),width:"".concat(b*o*s,"px"),height:"".concat(j*u*o*s,"px")},h=t===l?[B.a.box,B.a.active]:[B.a.box];return Object(c.jsx)("div",{className:h.join(" "),style:x},t)}(e,t)}))]})})},X=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.image,n=e.x,i=e.y,a=e.width,o=e.height,s=e.ratio,r=e.zoom,u=e.boxes,b=e.setWidth,j=e.setHeight,x=e.setBoxes,l=e.activeBox,h=e.setActiveBox;return Object(c.jsx)(N,{image:t,x:n,y:i,width:a,height:o,zoom:r,ratio:s,boxes:u,setWidth:b,setHeight:j,setBoxes:x,activeBox:l,setActiveBox:h})}})},z=function(e){var t=e.image,n=e.className,a=e.children,o=Object(i.useState)(0),s=Object(h.a)(o,2),r=s[0],b=s[1],j=Object(i.useState)(0),x=Object(h.a)(j,2),l=x[0],v=x[1],O=Object(i.useState)(0),f=Object(h.a)(O,2),m=f[0],d=f[1],p=Object(i.useState)(0),g=Object(h.a)(p,2),_=g[0],w=g[1],y=Object(i.useState)(1),S=Object(h.a)(y,2),B=S[0],N=S[1],X=Object(i.useState)(2),z=Object(h.a)(X,2),C=z[0],k=z[1],A=Object(i.useState)("draw"),E=Object(h.a)(A,2),F=E[0],W=E[1],Y=Object(i.useState)(0),M=Object(h.a)(Y,2),H=M[0],L=M[1],R=Object(i.useState)([{x:.113,y:.0867,width:.0706,height:.0481},{x:.294,y:.1554,width:.1657,height:.0128}]),T=Object(h.a)(R,2),V=T[0],Z=T[1];return Object(c.jsx)(u.Provider,{value:{image:t,x:r,y:l,zoom:C,height:m,width:_,ratio:B,boxes:V,setX:b,setY:v,setZoom:k,setHeight:d,setWidth:w,setRatio:N,setBoxes:Z,viewerState:F,setViewerState:W,activeBox:H,setActiveBox:L},children:Object(c.jsx)("div",{className:n,children:a})})},C=n(3),k=n.n(C),A=function(e){var t=e.boxes,n=e.activeBox,i=e.setActiveBox;return Object(c.jsx)("div",{className:k.a.xml,children:t.map((function(e,t){var a,o=e.x,s=e.y,r=e.width,u=e.height,b=e.text;return Object(c.jsxs)("div",{className:t===n?[k.a.active,k.a.line].join(" "):k.a.line,onClick:function(){return i(t)},children:[Object(c.jsx)("span",{className:k.a.bracket,children:"<w"})," ",Object(c.jsx)("span",{className:k.a.element,children:'facs="urn:cite:perseus:miscellanyimgs.UWDkbqJfqQc@'.concat((a={x:o,y:s,width:r,height:u},[a.x,a.y,a.width,a.height].map((function(e){return e.toFixed(4)})).join(",")),'"')}),Object(c.jsx)("span",{className:k.a.bracket,children:">"}),!!b&&Object(c.jsx)("br",{}),!!b&&Object(c.jsx)(c.Fragment,{children:"\xa0\xa0"}),b,!!b&&Object(c.jsx)("br",{}),Object(c.jsx)("span",{className:k.a.bracket,children:"</w>"})]},t)}))})},E=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.boxes,n=e.activeBox,i=e.setActiveBox;return Object(c.jsx)(A,{boxes:t,activeBox:n,setActiveBox:i})}})},F=n(10),W=n.n(F),Y=n.p+"static/media/latin.13f66406.jpg",M=function(){return Object(c.jsxs)(z,{className:W.a.transcription,image:Y,children:[Object(c.jsx)(X,{}),Object(c.jsx)(l,{}),Object(c.jsx)(y,{}),Object(c.jsx)(E,{})]})};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.d9daae2a.chunk.js.map