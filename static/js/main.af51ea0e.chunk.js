(this["webpackJsonptranscription-react"]=this["webpackJsonptranscription-react"]||[]).push([[0],[,,,function(e,t,n){e.exports={xml:"Xml_xml__1n50u",bracket:"Xml_bracket__rKg-A",element:"Xml_element__3P9um",attribute:"Xml_attribute__n_pW3",attributeText:"Xml_attributeText__2X5Ok"}},function(e,t,n){e.exports={viewer:"Viewer_viewer__1Spx5",box:"Viewer_box__3pcwy",select:"Viewer_select__il19s"}},,function(e,t,n){e.exports={container:"Navigator_container__2s-4C",image:"Navigator_image__3ITwa"}},,function(e,t,n){e.exports={editor:"Editor_editor__2aEyo"}},function(e,t,n){e.exports={scrollbox:"ScrollBox_scrollbox__FX24s"}},function(e,t,n){e.exports={transcription:"App_transcription__1Qfh6"}},,,,,,function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),i=n.n(s),a=n(7),r=n.n(a),o=Object(s.createContext)();o.displayName="TranscriptionContext";var u=o,b=n(8),l=n.n(b),j=function(e){var t=e.boxes,n=e.setBoxes,s=t[t.length-1];return Object(c.jsxs)("div",{className:l.a.editor,children:["Text:",Object(c.jsx)("input",{type:"text",onChange:function(e){var c=e.target.value,i=t.slice(0,-1).concat({x:s.x,y:s.y,height:s.height,width:s.width,text:c});n(i)},value:s.text||""})]})},x=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.boxes,n=e.setBoxes;return Object(c.jsx)(j,{boxes:t,setBoxes:n})}})},h=n(2),O=n(9),d=n.n(O),m=function(e,t){return e>t?e:t},f=function(e,t){return e<t?e:t},v=function(e,t,n,c,s,i,a){return c?{left:e*(i/c),top:t*(i/c),width:"".concat(i/n,"px"),height:"".concat(s/n/c*i,"px")}:{}},g=function(e){var t=e.x,n=e.y,i=e.zoom,a=e.width,r=e.height,o=e.localWidth,u=e.localHeight,b=e.setX,l=e.setY,j=Object(s.useState)(!1),x=Object(h.a)(j,2),O=x[0],g=x[1],p=Object(s.useState)(null),_=Object(h.a)(p,2),w=_[0],y=_[1],S=Object(s.useState)(null),N=Object(h.a)(S,2),X=N[0],k=N[1];return Object(s.useEffect)((function(){var e=function(){return g(!1)};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mousemove",e)}}),[]),Object(c.jsx)("div",{style:v(t,n,i,a,r,o),className:d.a.scrollbox,onMouseDown:function(e){var c=e.screenX,s=e.screenY;y(c-t),k(s-n),g(!0)},onMouseMove:function(e){var t=e.screenX,n=e.screenY;if(O){var c=o/i,s=r/i/a*o,j=f(m(t-w,0),a/o*(o-c)),x=f(m(n-X,0),a/o*(u-s));b(j),l(x)}}})},p=n(6),_=n.n(p),w=function(e){var t=e.image,n=e.x,i=e.y,a=e.zoom,r=e.width,o=e.height,u=e.setX,b=e.setY,l=Object(s.useRef)(null),j=Object(s.useState)(null),x=Object(h.a)(j,2),O=x[0],d=x[1],m=Object(s.useState)(null),f=Object(h.a)(m,2),v=f[0],p=f[1];return Object(s.useEffect)((function(){var e=l.current,t=function(){var t=e.clientHeight,n=e.clientWidth;d(t),p(n)},n=new ResizeObserver(t);return t(),n.observe(e),function(){n.unobserve(e)}}),[]),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:_.a.container,ref:l,children:[Object(c.jsx)("img",{src:t,className:_.a.image}),Object(c.jsx)(g,{x:n,y:i,zoom:a,width:r,height:o,localHeight:O,localWidth:v,setX:u,setY:b})]})})},y=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.image,n=e.x,s=e.y,i=e.zoom,a=e.height,r=e.width,o=e.setX,u=e.setY;return Object(c.jsx)(w,{image:t,x:n,y:s,zoom:i,height:a,width:r,setX:o,setY:u})}})},S=n(4),N=n.n(S),X=function(e){var t=e.image,n=e.x,i=e.y,a=e.width,r=(e.height,e.zoom),o=e.boxes,u=e.setWidth,b=e.setHeight,l=e.setBoxes,j=Object(s.useState)(!1),x=Object(h.a)(j,2),O=x[0],d=x[1],m=Object(s.useState)(null),f=Object(h.a)(m,2),v=f[0],g=f[1],p=Object(s.useState)(null),_=Object(h.a)(p,2),w=_[0],y=_[1],S=Object(s.useState)(0),X=Object(h.a)(S,2),k=X[0],z=X[1],M=Object(s.useState)(0),W=Object(h.a)(M,2),Y=W[0],B=W[1],C=Object(s.useRef)(null);Object(s.useEffect)((function(){var e=C.current,t=function(){var t=e.clientHeight,n=e.clientWidth;b(t),u(n)},n=new ResizeObserver(t);return t(),n.observe(e),function(){n.unobserve(e)}}),[]);var E={backgroundImage:"url(".concat(t,")"),backgroundPosition:"-".concat(r*n,"px -").concat(r*i,"px"),backgroundSize:"".concat(100*r,"%")};return Object(c.jsxs)("div",{ref:C,className:N.a.viewer,style:E,onMouseDown:function(e){var t=e.clientX,n=e.clientY;g(t-10),y(n-10),d(!0)},onMouseMove:function(e){var t=e.clientX,n=e.clientY;O&&(z(t-v-10),B(n-w-10))},onMouseUp:function(){if(Y&&k){var e=Y<0?w+Y:w,t=k<0?v+k:v,c=o.concat({y:(e+i*r)/(a*r),x:(t+n*r)/(a*r),width:Math.abs(k)/(a*r),height:Math.abs(Y)/(a*r)});l(c),d(!1),z(null),B(null)}},children:[function(){if(!O)return!1;var e={top:Y<0?w+Y:w,left:k<0?v+k:v,height:"".concat(Math.abs(Y),"px"),width:"".concat(Math.abs(k),"px")};return Object(c.jsx)("div",{style:e,className:N.a.select})}(),o.map((function(e,t){return function(e,t){var s=e.x,o=e.y,u=e.width,b=e.height,l={top:"".concat(o*a*r-i*r,"px"),left:"".concat(s*a*r-n*r,"px"),width:"".concat(u*a*r,"px"),height:"".concat(b*a*r,"px")};return Object(c.jsx)("div",{className:N.a.box,style:l},t)}(e,t)}))]})},k=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.image,n=e.x,s=e.y,i=e.width,a=e.height,r=e.zoom,o=e.boxes,u=e.setWidth,b=e.setHeight,l=e.setBoxes;return Object(c.jsx)(X,{image:t,x:n,y:s,width:i,height:a,zoom:r,boxes:o,setWidth:u,setHeight:b,setBoxes:l})}})},z=function(e){var t=e.image,n=e.className,i=e.children,a=Object(s.useState)(0),r=Object(h.a)(a,2),o=r[0],b=r[1],l=Object(s.useState)(0),j=Object(h.a)(l,2),x=j[0],O=j[1],d=Object(s.useState)(null),m=Object(h.a)(d,2),f=m[0],v=m[1],g=Object(s.useState)(null),p=Object(h.a)(g,2),_=p[0],w=p[1],y=Object(s.useState)(2),S=Object(h.a)(y,2),N=S[0],X=S[1],k=Object(s.useState)([{x:.1,y:.2,width:.1,height:.1}]),z=Object(h.a)(k,2),M=z[0],W=z[1];return Object(c.jsx)(u.Provider,{value:{image:t,x:o,y:x,zoom:N,height:f,width:_,boxes:M,setX:b,setY:O,setZoom:X,setHeight:v,setWidth:w,setBoxes:W},children:Object(c.jsx)("div",{className:n,children:i})})},M=n(3),W=n.n(M),Y=function(e){var t=e.boxes;return Object(c.jsx)("div",{className:W.a.xml,children:t.map((function(e,t){var n=e.x,s=e.y,i=e.width,a=e.height,r=e.text;return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:W.a.bracket,children:"<w"})," ",Object(c.jsx)("span",{className:W.a.element,children:'facs="urn:cite:perseus:miscellanyimgs.UWDkbqJfqQc@'.concat(n,",").concat(s,",").concat(i,",").concat(a,'"')}),Object(c.jsx)("span",{className:W.a.bracket,children:">"}),!!r&&Object(c.jsx)("br",{}),!!r&&Object(c.jsx)(c.Fragment,{children:"\xa0\xa0"}),r,!!r&&Object(c.jsx)("br",{}),Object(c.jsx)("span",{className:W.a.bracket,children:"</w>"})]},t)}))})},B=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.boxes;return Object(c.jsx)(Y,{boxes:t})}})},C=n(10),E=n.n(C),H=n.p+"static/media/philostratus.d019d7fc.jpg",T=function(){return Object(c.jsxs)(z,{className:E.a.transcription,image:H,children:[Object(c.jsx)(k,{}),Object(c.jsx)(x,{}),Object(c.jsx)(y,{}),Object(c.jsx)(B,{})]})};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.af51ea0e.chunk.js.map