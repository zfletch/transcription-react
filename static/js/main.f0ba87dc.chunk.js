(this["webpackJsonptranscription-react"]=this["webpackJsonptranscription-react"]||[]).push([[0],[,,,function(e,t,n){e.exports={xml:"Xml_xml__1n50u",bracket:"Xml_bracket__rKg-A",element:"Xml_element__3P9um",attribute:"Xml_attribute__n_pW3",attributeText:"Xml_attributeText__2X5Ok"}},function(e,t,n){e.exports={viewer:"Viewer_viewer__1Spx5",box:"Viewer_box__3pcwy",select:"Viewer_select__il19s"}},,function(e,t,n){e.exports={container:"Navigator_container__2s-4C",image:"Navigator_image__3ITwa"}},,function(e,t,n){e.exports={editor:"Editor_editor__2aEyo"}},function(e,t,n){e.exports={scrollbox:"ScrollBox_scrollbox__FX24s"}},function(e,t,n){e.exports={transcription:"App_transcription__1Qfh6"}},,,,,,function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),i=n.n(s),r=n(7),a=n.n(r),o=Object(s.createContext)();o.displayName="TranscriptionContext";var u=o,b=n(8),l=n.n(b),j=function(e){var t=e.boxes,n=e.setBoxes,s=t[t.length-1];return Object(c.jsxs)("div",{className:l.a.editor,children:["Text:",Object(c.jsx)("input",{type:"text",onChange:function(e){var c=e.target.value,i=t.slice(0,-1).concat({x:s.x,y:s.y,height:s.height,width:s.width,text:c});n(i)},value:s.text||""})]})},h=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.boxes,n=e.setBoxes;return Object(c.jsx)(j,{boxes:t,setBoxes:n})}})},x=n(2),d=n(9),O=n.n(d),m=function(e,t){return e>t?e:t},f=function(e,t){return e<t?e:t},v=function(e,t,n,c,s,i,r){return c?{left:e*(i/c),top:t*(i/c),width:"".concat(i/n,"px"),height:"".concat(s/n/c*i,"px")}:{}},g=function(e){var t=e.x,n=e.y,i=e.zoom,r=e.width,a=e.height,o=e.localWidth,u=e.localHeight,b=e.setX,l=e.setY,j=Object(s.useState)(!1),h=Object(x.a)(j,2),d=h[0],g=h[1],p=Object(s.useState)(null),w=Object(x.a)(p,2),_=w[0],y=w[1],S=Object(s.useState)(null),N=Object(x.a)(S,2),X=N[0],k=N[1];return Object(s.useEffect)((function(){var e=function(){return g(!1)};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mousemove",e)}}),[]),Object(c.jsx)("div",{style:v(t,n,i,r,a,o),className:O.a.scrollbox,onMouseDown:function(e){var c=e.screenX,s=e.screenY;y(c-t),k(s-n),g(!0)},onMouseMove:function(e){var t=e.screenX,n=e.screenY;if(d){var c=o/i,s=a/i/r*o,j=f(m(t-_,0),r/o*(o-c)),h=f(m(n-X,0),r/o*(u-s));b(j),l(h)}}})},p=n(6),w=n.n(p),_=function(e){var t=e.image,n=e.x,i=e.y,r=e.zoom,a=e.width,o=e.height,u=e.setX,b=e.setY,l=Object(s.useRef)(null),j=Object(s.useState)(null),h=Object(x.a)(j,2),d=h[0],O=h[1],m=Object(s.useState)(null),f=Object(x.a)(m,2),v=f[0],p=f[1];return Object(s.useEffect)((function(){var e=l.current,t=function(){var t=e.clientHeight,n=e.clientWidth;O(t),p(n)},n=new ResizeObserver(t);return t(),n.observe(e),function(){n.unobserve(e)}}),[]),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:w.a.container,ref:l,children:[Object(c.jsx)("img",{src:t,className:w.a.image}),Object(c.jsx)(g,{x:n,y:i,zoom:r,width:a,height:o,localHeight:d,localWidth:v,setX:u,setY:b})]})})},y=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.image,n=e.x,s=e.y,i=e.zoom,r=e.height,a=e.width,o=e.setX,u=e.setY;return Object(c.jsx)(_,{image:t,x:n,y:s,zoom:i,height:r,width:a,setX:o,setY:u})}})},S=n(4),N=n.n(S),X=function(e){var t=e.image,n=e.x,i=e.y,r=e.width,a=(e.height,e.zoom),o=e.boxes,u=e.setWidth,b=e.setHeight,l=e.setBoxes,j=Object(s.useState)(!1),h=Object(x.a)(j,2),d=h[0],O=h[1],m=Object(s.useState)(null),f=Object(x.a)(m,2),v=f[0],g=f[1],p=Object(s.useState)(null),w=Object(x.a)(p,2),_=w[0],y=w[1],S=Object(s.useState)(0),X=Object(x.a)(S,2),k=X[0],z=X[1],M=Object(s.useState)(0),W=Object(x.a)(M,2),Y=W[0],B=W[1],C=Object(s.useRef)(null);Object(s.useEffect)((function(){var e=C.current,t=function(){var t=e.clientHeight,n=e.clientWidth;b(t),u(n)},n=new ResizeObserver(t);return t(),n.observe(e),function(){n.unobserve(e)}}),[]);var E={backgroundImage:"url(".concat(t,")"),backgroundPosition:"-".concat(a*n,"px -").concat(a*i,"px"),backgroundSize:"".concat(100*a,"%")};return Object(c.jsxs)("div",{ref:C,className:N.a.viewer,style:E,onMouseDown:function(e){var t=e.clientX,n=e.clientY;g(t-10),y(n-10),O(!0)},onMouseMove:function(e){var t=e.clientX,n=e.clientY;d&&(z(t-v-10),B(n-_-10))},onMouseUp:function(){if(Y&&k){var e=Y<0?_+Y:_,t=k<0?v+k:v,c=o.concat({y:(e+i*a)/(r*a),x:(t+n*a)/(r*a),width:Math.abs(k)/(r*a),height:Math.abs(Y)/(r*a)});l(c),O(!1),z(null),B(null)}},children:[function(){if(!d)return!1;var e={top:Y<0?_+Y:_,left:k<0?v+k:v,height:"".concat(Math.abs(Y),"px"),width:"".concat(Math.abs(k),"px")};return Object(c.jsx)("div",{style:e,className:N.a.select})}(),o.map((function(e,t){return function(e,t){var s=e.x,o=e.y,u=e.width,b=e.height,l={top:"".concat(o*r*a-i*a,"px"),left:"".concat(s*r*a-n*a,"px"),width:"".concat(u*r*a,"px"),height:"".concat(b*r*a,"px")};return Object(c.jsx)("div",{className:N.a.box,style:l},t)}(e,t)}))]})},k=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.image,n=e.x,s=e.y,i=e.width,r=e.height,a=e.zoom,o=e.boxes,u=e.setWidth,b=e.setHeight,l=e.setBoxes;return Object(c.jsx)(X,{image:t,x:n,y:s,width:i,height:r,zoom:a,boxes:o,setWidth:u,setHeight:b,setBoxes:l})}})},z=function(e){var t=e.image,n=e.className,i=e.children,r=Object(s.useState)(0),a=Object(x.a)(r,2),o=a[0],b=a[1],l=Object(s.useState)(0),j=Object(x.a)(l,2),h=j[0],d=j[1],O=Object(s.useState)(null),m=Object(x.a)(O,2),f=m[0],v=m[1],g=Object(s.useState)(null),p=Object(x.a)(g,2),w=p[0],_=p[1],y=Object(s.useState)(2),S=Object(x.a)(y,2),N=S[0],X=S[1],k=Object(s.useState)([{x:.1,y:.2,width:.1,height:.1}]),z=Object(x.a)(k,2),M=z[0],W=z[1];return Object(c.jsx)(u.Provider,{value:{image:t,x:o,y:h,zoom:N,height:f,width:w,boxes:M,setX:b,setY:d,setZoom:X,setHeight:v,setWidth:_,setBoxes:W},children:Object(c.jsx)("div",{className:n,children:i})})},M=n(3),W=n.n(M),Y=function(e){var t=e.boxes;return Object(c.jsx)("div",{className:W.a.xml,children:t.map((function(e,t){var n,s=e.x,i=e.y,r=e.width,a=e.height,o=e.text;return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:W.a.bracket,children:"<w"})," ",Object(c.jsx)("span",{className:W.a.element,children:'facs="urn:cite:perseus:miscellanyimgs.UWDkbqJfqQc@'.concat((n={x:s,y:i,width:r,height:a},[n.x,n.y,n.width,n.height].map((function(e){return e.toFixed(4)})).join(",")),'"')}),Object(c.jsx)("span",{className:W.a.bracket,children:">"}),!!o&&Object(c.jsx)("br",{}),!!o&&Object(c.jsx)(c.Fragment,{children:"\xa0\xa0"}),o,!!o&&Object(c.jsx)("br",{}),Object(c.jsx)("span",{className:W.a.bracket,children:"</w>"})]},t)}))})},B=function(){return Object(c.jsx)(u.Consumer,{children:function(e){var t=e.boxes;return Object(c.jsx)(Y,{boxes:t})}})},C=n(10),E=n.n(C),H=n.p+"static/media/philostratus.d019d7fc.jpg",T=function(){return Object(c.jsxs)(z,{className:E.a.transcription,image:H,children:[Object(c.jsx)(k,{}),Object(c.jsx)(h,{}),Object(c.jsx)(y,{}),Object(c.jsx)(B,{})]})};a.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.f0ba87dc.chunk.js.map