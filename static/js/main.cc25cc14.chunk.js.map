{"version":3,"sources":["components/Transcription/transcription-context.js","components/Editor/index.js","components/Editor/Editor.js","components/Transcription/Editor/index.js","components/Transcription/Editor/Editor.js","components/Navigator/ScrollBox/ScrollBox.js","components/Navigator/ScrollBox/index.js","components/Navigator/index.js","components/Navigator/Navigator.js","components/Transcription/Navigator/index.js","components/Transcription/Navigator/Navigator.js","components/Viewer/index.js","components/Viewer/Viewer.js","components/Transcription/Viewer/index.js","components/Transcription/Viewer/Viewer.js","components/Transcription/index.js","components/Transcription/Transcription.js","components/Xml/Xml.js","components/Xml/index.js","components/Transcription/Xml/index.js","components/Transcription/Xml/Xml.js","components/App/latin.jpg","components/App/index.js","components/App/App.js","index.js","components/Editor/Editor.module.css","components/Viewer/Viewer.module.css","components/Xml/Xml.module.css","components/Navigator/ScrollBox/ScrollBox.module.css","components/App/App.module.css","components/Navigator/Navigator.module.css"],"names":["TranscriptionContext","createContext","displayName","Editor","image","boxes","x","y","width","height","setBoxes","activeBox","setActiveBox","naturalHeight","naturalWidth","containerRef","useRef","useState","containerHeight","setContainerHeight","containerWidth","setContainerWidth","useEffect","container","current","resize","ch","clientHeight","cw","clientWidth","observer","ResizeObserver","observe","unobserve","zoomAmount","maxHeight","maxWidth","style","a","b","selectedBox","updateField","field","transform","value","target","newBox","text","newBoxes","map","ii","backgroundImage","backgroundPosition","backgroundSize","className","styles","editor","onChange","parseInt","box","undefined","type","e","max","min","step","parseFloat","toFixed","onClick","filter","imageWrapper","ref","Consumer","zoom","setZoom","generateStyle","localWidth","localHeight","offsetLeft","offsetTop","left","top","ScrollBox","setX","setY","drag","setDrag","offsetX","setOffsetX","offsetY","setOffsetY","onMouseMove","clientX","clientY","boxWidth","boxHeight","speedX","newX","newY","onMouseUp","window","addEventListener","removeEventListener","scrollbox","onMouseDown","Navigator","setRatio","setNaturalHeight","setNaturalWidth","navigatorRef","imageRef","setLocalHeight","setLocalWidth","setOffsetLeft","setOffsetTop","navigator","element","lh","lw","nh","nw","ol","ot","header","disabledSelector","selector","icon","src","Viewer","ratio","setWidth","setHeight","select","setSelect","selectX","setSelectX","selectY","setSelectY","selectWidth","setSelectWidth","selectHeight","setSelectHeight","mode","setMode","activeSelector","viewer","draw","join","selectTop","selectLeft","concat","Math","abs","length","renderSelect","i","index","boxX","boxY","classes","push","active","selectBox","renderBox","Transcription","xml","children","viewerState","setViewerState","Provider","extractJson","key","forEach","node","$","facs","split","$$","Object","keys","newKey","Xml","json","parseString","explicitChildren","_err","result","xmlToJson","theme","tabSize","showPrintMargin","editorProps","$blockScrolling","App","transcription","philostratus","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.cc25cc14.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nconst TranscriptionContext = createContext();\n\nTranscriptionContext.displayName = 'TranscriptionContext';\n\nexport default TranscriptionContext;\n","import Editor from './Editor';\n\nexport default Editor;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport styles from './Editor.module.css';\n\nconst min = (a, b) => (\n  a < b ? a : b\n);\n\nconst Editor = ({ image, x, y, width, height, boxes, setBoxes, activeBox, setActiveBox, naturalHeight, naturalWidth }) => {\n  const containerRef = useRef(null);\n  const [containerHeight, setContainerHeight] = useState(null);\n  const [containerWidth, setContainerWidth] = useState(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n\n    const resize = () => {\n      const ch = container.clientHeight;\n      const cw = container.clientWidth;\n\n      setContainerHeight(ch);\n      setContainerWidth(cw);\n    };\n\n    resize();\n\n    const observer = new ResizeObserver(resize);\n    observer.observe(container);\n\n    return () => {\n      observer.unobserve(container);\n    };\n  }, []);\n\n  const selectedBox = activeBox === null ? null : boxes[activeBox];\n\n  const updateField = (field, { target: { value }}, transform) => {\n    const newBox = {\n      x: selectedBox.x,\n      y: selectedBox.y,\n      height: selectedBox.height,\n      width: selectedBox.width,\n      text: selectedBox.text,\n    }\n    newBox[field] = transform ? transform(value) : value;\n    const newBoxes = boxes.map((b, ii) => ii === activeBox ? newBox : b);\n\n    setBoxes(newBoxes);\n  };\n\n  const deleteBox = () => {\n    const newBoxes = boxes.filter((b, ii) => ii === activeBox ? false : true);\n\n    setBoxes(newBoxes);\n    setActiveBox(null);\n  };\n\n  let zoomAmount;\n  let maxHeight;\n  let maxWidth;\n  let style;\n\n  if (selectedBox !== null) {\n    zoomAmount = min(containerWidth / (selectedBox.width * naturalWidth), containerHeight / (selectedBox.height * naturalHeight));\n    maxHeight = containerWidth * selectedBox.height * naturalHeight / (selectedBox.width * naturalWidth);\n    maxWidth = containerHeight * selectedBox.width * naturalWidth / (selectedBox.height * naturalHeight);\n\n    style = {\n      backgroundImage: `url(${image})`,\n      backgroundPosition: `-${selectedBox.x *  naturalWidth * zoomAmount}px -${selectedBox.y * naturalHeight * zoomAmount}px`,\n      backgroundSize: `${naturalWidth * zoomAmount}px`,\n      maxHeight: `${maxHeight}px`,\n      maxWidth: `${maxWidth}px`,\n    }\n  }\n\n  return (\n    <div className={styles.editor}>\n      <div>\n        Select box:\n        <select value={activeBox === null ? '' : activeBox} onChange={({ target: { value }}) => setActiveBox(value === '' ? null : parseInt(value))}>\n          <option value=\"\">-</option>\n          {boxes.map((box, ii) => <option key={ii} value={ii}>{ii + 1}{boxes[ii].text !== undefined ? ` - ${boxes[ii].text}` : ''}</option>)}\n        </select>\n        <br />\n        {(selectedBox !== null) && (\n          <>\n            Text:\n            <input type=\"text\" onChange={(e) => updateField('text', e)} value={selectedBox.text || ''} />\n            <br />\n            X:\n            <input type=\"number\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('x', e, parseFloat)} value={selectedBox.x.toFixed(4) || '0'} />\n            <br />\n            Y:\n            <input type=\"number\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('y', e, parseFloat)} value={selectedBox.y.toFixed(4) || '0'} />\n            <br />\n            Width:\n            <input type=\"number\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('width', e, parseFloat)} value={selectedBox.width.toFixed(4) || '0'} />\n            <br />\n            Height:\n            <input type=\"number\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('height', e, parseFloat)} value={selectedBox.height.toFixed(4) || '0'} />\n            <br />\n            Delete:\n            <input type=\"button\" onClick={deleteBox} value=\"Delete\" />\n          </>\n        )}\n      </div>\n      <div className={styles.imageWrapper} ref={containerRef}>\n        {(selectedBox !== null) && (\n          <div style={style} className={styles.image} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Editor;\n","import Editor from './Editor';\n\nexport default Editor;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Editor from '../../Editor';\n\nconst EditorWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ image, x, y, width, height, boxes, setBoxes, zoom, setZoom, activeBox, setActiveBox, naturalHeight, naturalWidth }) => <Editor image={image} x={x} y={y} width={width} height={height} boxes={boxes} setBoxes={setBoxes} zoom={zoom} setZoom={setZoom} activeBox={activeBox} setActiveBox={setActiveBox} naturalHeight={naturalHeight} naturalWidth={naturalWidth} />}\n  </TranscriptionContext.Consumer>\n);\n\nexport default EditorWithContext;\n","import React, { useEffect, useState } from 'react';\n\nimport styles from './ScrollBox.module.css';\n\nconst max = (a, b) => (\n  a > b ? a : b\n);\n\nconst min = (a, b) => (\n  a < b ? a : b\n);\n\nconst generateStyle = (x, y, zoom, width, height, localWidth, localHeight, offsetLeft, offsetTop) => {\n  // The way that CSS background images work is that the `width` is always\n  // equivalent to 100% of the image (when `background-size` is `100%`) but the\n  // height may be less.\n  // To calculate what the size of the scrollbox should be, we can just use 100%\n  // for the width (and adjust it based on zoom).\n  // For the height, we can figure out the percentage of the height that make up\n  // the width and multiply that by 100% (adjusted based on zoom).\n  // We can calculate `x` and `y` by finding the ratio between the width and\n  // localWidth and multiplying `x` and `y` by that value.\n\n  if (!width) {\n    return {};\n  }\n\n  return {\n    left: x * (localWidth / width) + offsetLeft,\n    top: y * (localWidth / width) + offsetTop,\n    width: `${min(localWidth / zoom, localWidth)}px`,\n    height: `${min(((height / zoom) / width) * localWidth, localHeight)}px`,\n  };\n};\n\nconst ScrollBox = ({ x, y, zoom, width, height, localWidth, localHeight, offsetLeft, offsetTop, setX, setY }) => {\n  const [drag, setDrag] = useState(false);\n  const [offsetX, setOffsetX] = useState(null);\n  const [offsetY, setOffsetY] = useState(null);\n\n  const onMouseMove = ({ clientX, clientY }) => {\n    if (drag) {\n      const boxWidth = localWidth / zoom;\n      const boxHeight = ((height / zoom) / width) * localWidth;\n\n      const speedX = ((offsetLeft * 2) + localWidth) / localWidth;\n\n      const newX = min(max(clientX * speedX - offsetX, 0), max((localWidth - boxWidth) * (width / localWidth), 0));\n      const newY = min(max(clientY * speedX - offsetY, 0), max((localHeight - boxHeight) * (width / localWidth), 0));\n\n      setX(newX);\n      setY(newY);\n    }\n  };\n\n  const onMouseDown = ({ clientX, clientY }) => {\n    const speedX = ((offsetLeft * 2) + localWidth) / localWidth;\n\n    setOffsetX(clientX * speedX - x);\n    setOffsetY(clientY * speedX - y);\n\n    setDrag(true);\n  };\n\n  useEffect(() => {\n    const onMouseUp = () => setDrag(false);\n\n    window.addEventListener('mouseup', onMouseUp);\n\n    return () => {\n      window.removeEventListener('mouseup', onMouseUp)\n    }\n  }, [])\n\n  useEffect(() => {\n    window.addEventListener('mousemove', onMouseMove);\n\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove)\n    }\n  }, [drag])\n\n  useEffect(() => {\n    const boxWidth = localWidth / zoom;\n    const boxHeight = ((height / zoom) / width) * localWidth;\n\n    const newX = min(max(x, 0), max((localWidth - boxWidth) * (width / localWidth), 0));\n    const newY = min(max(y, 0), max((localHeight - boxHeight) * (width / localWidth), 0));\n\n    if (newX !== x || newY !== y) {\n      setX(newX);\n      setY(newY);\n    }\n  }, [localHeight, localWidth, offsetLeft, offsetTop, zoom])\n\n  return (\n    <div\n      style={generateStyle(x, y, zoom, width, height, localWidth, localHeight, offsetLeft, offsetTop)}\n      className={styles.scrollbox}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n\nexport default ScrollBox;\n","import ScrollBox from './ScrollBox';\n\nexport default ScrollBox;\n","import Navigator from './Navigator';\n\nexport default Navigator;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { ZoomIn, ZoomOut } from 'react-feather';\n\nimport Scrollbox from './ScrollBox';\n\nimport styles from './Navigator.module.css';\n\nconst Navigator = ({ image, x, y, zoom, width, height, setX, setY, setRatio, setZoom, setNaturalHeight, setNaturalWidth }) => {\n  const navigatorRef = useRef(null);\n  const imageRef = useRef(null);\n  const [localHeight, setLocalHeight] = useState(null);\n  const [localWidth, setLocalWidth] = useState(null);\n  const [offsetLeft, setOffsetLeft] = useState(null);\n  const [offsetTop, setOffsetTop] = useState(null);\n\n  useEffect(() => {\n    const navigator = navigatorRef.current;\n    const element = imageRef.current;\n\n    const resize = () => {\n      const lh = element.clientHeight;\n      const lw = element.clientWidth;\n      const nh = element.naturalHeight;\n      const nw = element.naturalWidth;\n      const ol = element.offsetLeft;\n      const ot = element.offsetTop;\n\n      setLocalHeight(lh);\n      setLocalWidth(lw);\n      setNaturalHeight(nh);\n      setNaturalWidth(nw);\n      setOffsetLeft(ol);\n      setOffsetTop(ot);\n      setRatio(lh / lw);\n    };\n\n    resize();\n\n    const observer = new ResizeObserver(resize);\n    observer.observe(navigator);\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(navigator);\n      observer.unobserve(element);\n    };\n  }, []);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div className={zoom >= 9.99 ? styles.disabledSelector : styles.selector} onMouseDown={zoom >= 9.99 ? null : () => setZoom(zoom + 0.2)}>\n          <ZoomIn className={styles.icon} />\n        </div>\n\n        <div className={zoom <= 1.01 ? styles.disabledSelector : styles.selector} onMouseDown={zoom <= 1.01 ? null : () => setZoom(zoom - 0.2)}>\n          <ZoomOut className={styles.icon} />\n        </div>\n      </div>\n      <div className={styles.navigator} ref={navigatorRef}>\n        <img src={image} ref={imageRef} className={styles.image} />\n        <Scrollbox x={x} y={y} zoom={zoom} width={width} height={height} localHeight={localHeight} localWidth={localWidth} setX={setX} setY={setY} offsetLeft={offsetLeft} offsetTop={offsetTop} />\n      </div>\n    </div>\n  );\n};\n\nexport default Navigator;\n","import Navigator from './Navigator';\n\nexport default Navigator;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Navigator from '../../Navigator';\n\nconst NavigatorWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ image, x, y, zoom, height, width, setX, setY, setRatio, setZoom, setNaturalHeight, setNaturalWidth }) => (\n      <Navigator image={image} x={x} y={y} zoom={zoom} height={height} width={width} setX={setX} setY={setY} setRatio={setRatio} setZoom={setZoom} setNaturalHeight={setNaturalHeight} setNaturalWidth={setNaturalWidth} />\n    )}\n  </TranscriptionContext.Consumer>\n);\n\nexport default NavigatorWithContext;\n","import Viewer from './Viewer';\n\nexport default Viewer;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { MousePointer, Maximize } from 'react-feather';\n\nimport styles from './Viewer.module.css';\n\nconst Viewer = ({ image, x, y, width, height, zoom, boxes, ratio, setWidth, setHeight, setBoxes, activeBox, setActiveBox }) => {\n  const [select, setSelect] = useState(false);\n  const [selectX, setSelectX] = useState(null);\n  const [selectY, setSelectY] = useState(null);\n  const [selectWidth, setSelectWidth] = useState(0);\n  const [selectHeight, setSelectHeight] = useState(0);\n  const [offsetX, setOffsetX] = useState(0);\n  const [offsetY, setOffsetY] = useState(0);\n  const [mode, setMode] = useState('draw'); // draw, select\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const element = ref.current;\n    const resize = () => {\n      const height = element.clientHeight;\n      const width = element.clientWidth;\n\n      setHeight(height);\n      setWidth(width);\n      setOffsetX(element.offsetLeft);\n      setOffsetY(element.offsetTop);\n    };\n    const observer = new ResizeObserver(resize);\n\n    resize();\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(element);\n    };\n  }, []);\n\n  const renderBox = ({ x: boxX, y: boxY, width: boxWidth, height: boxHeight }, index) => {\n    const style = {\n      top: `${boxY * ratio * width * zoom - y * zoom}px`,\n      left: `${boxX * width * zoom - x * zoom}px`,\n      width: `${boxWidth * width * zoom}px`,\n      height: `${boxHeight * ratio * width * zoom}px`,\n    };\n    const classes = [styles.box];\n    if (index === activeBox) {\n      classes.push(styles.active);\n    }\n    if (mode === 'select' && index !== activeBox) {\n      classes.push(styles.selectBox);\n    }\n\n    return (\n      <div\n        key={index}\n        className={classes.join(' ')}\n        onMouseDown={mode === 'select' ? () => { setActiveBox(index) }: null}\n        style={style}\n      />\n    );\n  };\n\n  const onMouseUp = () => {\n    if (!selectHeight || !selectWidth) {\n      return;\n    }\n\n    const selectTop = selectHeight < 0 ? selectY + selectHeight : selectY;\n    const selectLeft = selectWidth < 0 ? selectX + selectWidth : selectX;\n\n    const newBoxes = boxes.concat({\n      y: (selectTop + y * zoom) / (width * ratio * zoom),\n      x: (selectLeft + x * zoom) / (width * zoom),\n      height: Math.abs(selectHeight) / (width * ratio * zoom),\n      width: Math.abs(selectWidth) / (width * zoom),\n    });\n\n    setBoxes(newBoxes);\n    setSelect(false);\n    setSelectWidth(null);\n    setSelectHeight(null);\n    setActiveBox(newBoxes.length - 1);\n  };\n\n  const renderSelect = () => {\n    if (!select) {\n      return false;\n    }\n\n    const selectTop = selectHeight < 0 ? selectY + selectHeight : selectY;\n    const selectLeft = selectWidth < 0 ? selectX + selectWidth : selectX;\n\n    const style = {\n      top: selectTop,\n      left: selectLeft,\n      height: `${Math.abs(selectHeight)}px`,\n      width: `${Math.abs(selectWidth)}px`,\n    };\n\n    return (\n      <div\n        style={style}\n        className={styles.select}\n      />\n    );\n  };\n\n  const onMouseMove = ({ clientX, clientY }) => {\n    if (select) {\n      setSelectWidth(clientX - selectX - offsetX);\n      setSelectHeight(clientY - selectY - offsetY);\n    }\n  };\n\n  const onMouseDown = ({ clientX, clientY }) => {\n    setSelectX(clientX - offsetX);\n    setSelectY(clientY - offsetY);\n\n    setSelect(true);\n  };\n\n  const style = {\n    backgroundImage: `url(${image})`,\n    backgroundPosition: `-${zoom * x}px -${zoom * y}px`,\n    backgroundSize: `${zoom * 100}%`,\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div className={mode === 'select' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'select' ? null : () => setMode('select')}>\n          <MousePointer className={styles.icon} />\n        </div>\n\n        <div className={mode === 'draw' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'draw' ? null : () => setMode('draw')}>\n          <Maximize className={styles.icon} />\n        </div>\n      </div>\n      <div\n        ref={ref}\n        className={mode === 'draw' ? [styles.viewer, styles.draw].join(' ') : styles.viewer}\n        style={style}\n        onMouseDown={mode === 'draw' ? onMouseDown : null}\n        onMouseMove={mode === 'draw' ? onMouseMove : null}\n        onMouseUp={mode === 'draw' ? onMouseUp : null}\n      >\n        {renderSelect()}\n        {boxes.map((b, i) => renderBox(b, i))}\n      </div>\n    </div>\n  );\n};\n\nexport default Viewer;\n","import Viewer from './Viewer';\n\nexport default Viewer;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Viewer from '../../Viewer';\n\nconst ViewerWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ image, x, y, width, height, ratio, zoom, boxes, setWidth, setHeight, setBoxes, activeBox, setActiveBox }) => <Viewer image={image} x={x} y={y} width={width} height={height} zoom={zoom} ratio={ratio} boxes={boxes} setWidth={setWidth} setHeight={setHeight} setBoxes={setBoxes} activeBox={activeBox} setActiveBox={setActiveBox} />}\n  </TranscriptionContext.Consumer>\n);\n\nexport default ViewerWithContext;\n","import Transcription from './Transcription';\n\nexport default Transcription;\n","import React, { useState } from 'react';\n\nimport TranscriptionContext from './transcription-context';\n\nconst Transcription = ({ image, xml, className, children }) => {\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [naturalHeight, setNaturalHeight] = useState(0);\n  const [naturalWidth, setNaturalWidth] = useState(0);\n  const [ratio, setRatio] = useState(1);\n  const [zoom, setZoom] = useState(2);\n  const [viewerState, setViewerState] = useState('draw'); // draw, select\n  const [activeBox, setActiveBox] = useState(0);\n  const [boxes, setBoxes] = useState([{ x: 0.1130, y: 0.0867, width: 0.0706, height: 0.0481 }, { x: 0.2940, y: 0.1554, width: 0.1657, height: 0.0128 }]);\n\n  return (\n    <TranscriptionContext.Provider value={{ image, x, y, zoom, height, width, ratio, boxes, setX, setY, setZoom, setHeight, setWidth, setRatio, setBoxes, viewerState, setViewerState, activeBox, setActiveBox, xml, naturalHeight, naturalWidth, setNaturalHeight, setNaturalWidth }}>\n      <div className={className}>\n        {children}\n      </div>\n    </TranscriptionContext.Provider>\n  );\n};\n\nexport default Transcription;\n","import React, { useEffect, useState } from 'react';\n\nimport styles from './Xml.module.css';\n\n// const format = ({ x, y, width, height }) => (\n//   [x, y, width, height].map(n => n.toFixed(4)).join(',')\n// );\n//\n// const Xml = ({ boxes, activeBox, setActiveBox }) => {\n//   return (\n//     <div className={styles.xml}>\n//       {boxes.map(({ x, y, width, height, text }, ii) => (\n//         <div key={ii} className={ii === activeBox ? [styles.active, styles.line].join(' ') : styles.line} onClick={() => setActiveBox(ii)}>\n//           <span className={styles.bracket}>&lt;w</span>\n//           {' '}\n//           <span className={styles.element}>\n//             {`facs=\"urn:cite:perseus:miscellanyimgs.UWDkbqJfqQc@${format({ x, y, width, height })}\"`}\n//           </span>\n//           <span className={styles.bracket}>&gt;</span>\n//           {text ? <br /> : false}\n//           {text ? <>&nbsp;&nbsp;</> : false}\n//           {text}\n//           {text ? <br /> : false}\n//           <span className={styles.bracket}>&lt;/w&gt;</span>\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\n\nimport AceEditor from 'react-ace';\nimport { parseString } from 'xml2js';\nimport { Edit, MousePointer, Save } from 'react-feather';\n\nimport 'ace-builds/src-noconflict/mode-xml';\nimport 'ace-builds/src-noconflict/theme-chrome';\n\nconst xmlToJson = (xml) => {\n  let json;\n  parseString(xml, { explicitChildren: true }, (_err, result) => {\n    json = result;\n  });\n\n  return json;\n};\n\nconst extractJson = (key, children, boxes) => {\n  children.forEach((node) => {\n    if (key === 'w' && node.$ && node.$.facs) {\n      const nums = node.$.facs.split('@')[1];\n      const [x, y, width, height] = nums.split(',').map(parseFloat);\n\n      boxes.push({ x, y, width, height });\n    }\n\n    if (node.$$) {\n      Object.keys(node.$$).forEach((newKey) => {\n        extractJson(newKey, node.$$[newKey], boxes);\n      });\n    }\n  });\n};\n\nconst Xml = ({ xml, setBoxes }) => {\n  const [mode, setMode] = useState('select') // select, edit, save\n\n  useEffect(() => {\n    const json = xmlToJson(xml)\n    const boxes = [];\n    Object.keys(json).forEach((element) => {\n      if (json[element].$$) {\n        Object.keys(json[element].$$).forEach((key) => {\n          extractJson(key, json[element].$$[key], boxes);\n        });\n      }\n    });\n    setBoxes(boxes);\n  }, [xml]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div className={mode === 'select' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'select' ? null : () => setMode('select')}>\n          <MousePointer className={styles.icon} />\n        </div>\n\n        <div className={mode === 'edit' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'edit' ? null : () => setMode('edit')}>\n          <Edit className={styles.icon} />\n        </div>\n\n        <div className={mode === 'save' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'save' ? null :  () => setMode('save')}>\n          <Save className={styles.icon} />\n        </div>\n      </div>\n      <AceEditor\n        className={styles.editor}\n        mode=\"xml\"\n        theme=\"chrome\"\n        tabSize={2}\n        height=\"auto\"\n        width=\"auto\"\n        showPrintMargin={false}\n        editorProps={{ $blockScrolling: true }}\n        value={xml}\n      />\n    </div>\n  );\n};\n\nexport default Xml\n","import Xml from './Xml';\n\nexport default Xml;\n","import Xml from './Xml';\n\nexport default Xml;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Xml from '../../Xml';\n\nconst XmlWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ boxes, setBoxes, activeBox, setActiveBox, xml }) => <Xml boxes={boxes} setBoxes={setBoxes} activeBox={activeBox} setActiveBox={setActiveBox} xml={xml} />}\n  </TranscriptionContext.Consumer>\n);\n\nexport default XmlWithContext;\n","export default __webpack_public_path__ + \"static/media/latin.13f66406.jpg\";","import App from './App';\n\nexport default App;\n","import React from 'react';\n\nimport Editor from '../Transcription/Editor';\nimport Navigator from '../Transcription/Navigator';\nimport Viewer from '../Transcription/Viewer';\nimport Transcription from '../Transcription';\nimport Xml from '../Transcription/Xml';\n\nimport styles from './App.module.css';\n\nimport philostratus from './latin.jpg';\n\nconst exampleXml = `\n<TEI xmlns=\"http://www.tei-c.org/ns/1.0\" xml:lang=\"en\">\n  <teiHeader>\n      <fileDesc>\n         <titleStmt>\n            <title>IG II² 12974, Philostratus the son of Philoxenus</title>\n            <editor>\n                <name>Daniel Orazio</name>\n            </editor>\n            <editor>\n                <name>Michael Brown</name>\n            </editor>\n            <editor>\n                <name>Devon Armstrong</name>\n            </editor>\n            <editor role=\"reviewer\">Marie-Claire Beaulieu, Phd.</editor>\n         </titleStmt>\n         <publicationStmt>\n            <authority>Perseus Project</authority>\n            <idno type=\"urn:cts\">urn:cts:ig:ii_2.12974.perseus-grc1</idno>\n            <availability>\n               <p>This work is licensed under a\n          <ref type=\"license\" target=\"http://creativecommons.org/licenses/by-sa/3.0/\">Creative \n          Commons Attribution-ShareAlike 3.0 License</ref>.</p>\n            </availability>\n         </publicationStmt>\n         <sourceDesc>\n            <p>\n               <bibl></bibl>\n            </p>\n         </sourceDesc>\n      </fileDesc>\n      <profileDesc>\n         <langUsage>\n            <language ident=\"en\">English</language>\n            <language ident=\"grc\">Greek</language>\n         </langUsage>\n      </profileDesc>\n      <revisionDesc>\n          <change when=\"2014-11-30T14:34:52.01Z\" who=\"http://data.perseus.org/sosol/users/Bridget%20Almas\">Finalized - Finalized.</change>\n          <change when=\"2014-11-30T14:34:52.006Z\" who=\"http://data.perseus.org/sosol/users/Marie-Claire%20B\">Vote - Approve - Great!</change>\n          <change when=\"2014-11-26T22:19:41.364Z\" who=\"http://data.perseus.org/sosol/users/Bridget%20Almas\">Adding editors, titles and correcting transcription.</change>\n          <change when=\"2014-02-06T20:15:23.157Z\" who=\"http://data.perseus.org/sosol/users/Bridget%20Almas%20-%20Tufts%20Account\">Finalized - Committing approved version to master repo.</change>\n          <change when=\"2014-02-06T20:15:23.148Z\" who=\"http://data.perseus.org/sosol/users/Marie-Claire%20B\">Vote - Accept - Very good translation! You will get full credit. The second line is tricky to render into English, but I think you did well to emphasize the \"kai... te\"</change>\n          <change when=\"2013-12-13T18:39:17.529Z\" who=\"http://data.perseus.org/sosol/users/Dan%20Orazio\">transcribed and translated</change>\n          <change when=\"2013-12-04T20:32:43+00:00\" who=\"http://perseids.org/editor\">Automated creation from template</change>\n      </revisionDesc>\n  </teiHeader>\n  <text>\n      <body>\n         <div xml:lang=\"grc\" type=\"edition\" xml:space=\"preserve\">\n      \t<lg met=\"\">\n\t\t\t<l n=\"1\"><supplied reason=\"lost\">Φιλ</supplied><w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.2012,0.4199,0.3483,0.0725\">όστρατοσ</w> <w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.5506,0.435,0.4324,0.0634\">Φιλοξένου</w><lb n=\"1\"></lb></l>\n                        <l n=\"1\"><w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.0661,0.5166,0.047,0.0453\">παῖ</w> <w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.1121,0.5227,0.1271,0.0408\">πατέρος</w> <w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.2402,0.5317,0.1061,0.0438\">σαυτοῦ</w> <w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.3453,0.5302,0.1211,0.0498\">πατρὸς</w> <w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.4655,0.5363,0.0871,0.0438\">ἔχων</w><lb n=\"2\"></lb></l>\n                        <l n=\"1\"><w facs=\"urn:cite:perseus:funeraryimg.wUdglRwLMJ6@0.6496,0.5393,0.0551,0.0483\">καὶ</w> <w>παραμύθιον</w> <w>ἦσθα</w> <w>παπωνύμιον</w> <w>τε</w> <w>γονεῦσι</w><lb n=\"3\"></lb></l>\n                        <l n=\"1\"><w>Νεολλαρίων</w> <w>δαίμων</w> <w>δέ</w> <w>σ'</w> <w>ἀφείλετο</w> <w>πᾶ(σ)ι</w> <w>ποθεινόν</w><lb n=\"4\"></lb></l>\n</lg>\n</div>\n      </body>\n  </text>\n</TEI>\n`;\n\nconst App = () => (\n  <Transcription className={styles.transcription} image={philostratus} xml={exampleXml}>\n    <Viewer />\n    <Editor />\n    <Navigator />\n    <Xml />\n  </Transcription>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__2aEyo\",\"imageWrapper\":\"Editor_imageWrapper__1uBBC\",\"image\":\"Editor_image__1qFHM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Viewer_container__3i4A8\",\"viewer\":\"Viewer_viewer__1Spx5\",\"draw\":\"Viewer_draw__2gOsn\",\"box\":\"Viewer_box__3pcwy\",\"selectBox\":\"Viewer_selectBox__BhI5r\",\"active\":\"Viewer_active__3yomw\",\"select\":\"Viewer_select__il19s\",\"header\":\"Viewer_header__34LO6\",\"selector\":\"Viewer_selector__24MV2\",\"disabledSelector\":\"Viewer_disabledSelector__2KL_J\",\"activeSelector\":\"Viewer_activeSelector__2VkKS\",\"icon\":\"Viewer_icon__3g3GG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"xml\":\"Xml_xml__1n50u\",\"line\":\"Xml_line__2gipS\",\"active\":\"Xml_active__1XIyg\",\"bracket\":\"Xml_bracket__rKg-A\",\"element\":\"Xml_element__3P9um\",\"attribute\":\"Xml_attribute__n_pW3\",\"attributeText\":\"Xml_attributeText__2X5Ok\",\"container\":\"Xml_container__10zgJ\",\"header\":\"Xml_header__1n-tn\",\"editor\":\"Xml_editor__134Xj\",\"selector\":\"Xml_selector__1dO1X\",\"icon\":\"Xml_icon__pqd8K\",\"activeSelector\":\"Xml_activeSelector__3b8oc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollbox\":\"ScrollBox_scrollbox__FX24s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"transcription\":\"App_transcription__1Qfh6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Navigator_container__2s-4C\",\"header\":\"Navigator_header__3xIOu\",\"navigator\":\"Navigator_navigator__3gcbv\",\"image\":\"Navigator_image__3ITwa\",\"selector\":\"Navigator_selector__2Owvv\",\"disabledSelector\":\"Navigator_disabledSelector__Fu-Qq\",\"icon\":\"Navigator_icon__2ZdME\"};"],"sourceRoot":""}