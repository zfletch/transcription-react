{"version":3,"sources":["components/Editor/Editor.module.css","components/Xml/Xml.module.css","components/Transcription/transcription-context.js","components/Editor/index.js","components/Editor/Editor.js","components/Transcription/Editor/index.js","components/Transcription/Editor/Editor.js","components/Navigator/ScrollBox/ScrollBox.js","components/Navigator/ScrollBox/index.js","components/Navigator/index.js","components/Navigator/Navigator.js","components/Transcription/Navigator/index.js","components/Transcription/Navigator/Navigator.js","components/Viewer/index.js","components/Viewer/Viewer.js","components/Transcription/Viewer/index.js","components/Transcription/Viewer/Viewer.js","components/Transcription/index.js","components/Transcription/Transcription.js","components/Xml/Xml.js","components/Xml/index.js","components/Transcription/Xml/index.js","components/Transcription/Xml/Xml.js","components/Home/copy-url.png","components/Home/edit-transcription.png","components/Home/paste-url.png","components/Home/visit-page.png","components/Home/Home.js","components/Home/index.js","components/App/App.js","components/App/index.js","index.js","components/Viewer/Viewer.module.css","components/Navigator/ScrollBox/ScrollBox.module.css","components/App/App.module.css","components/Navigator/Navigator.module.css"],"names":["module","exports","TranscriptionContext","createContext","displayName","Editor","image","boxes","x","y","width","height","setBoxes","activeBox","setActiveBox","naturalHeight","naturalWidth","containerRef","useRef","useState","containerHeight","setContainerHeight","containerWidth","setContainerWidth","useEffect","container","current","resize","ch","clientHeight","cw","clientWidth","observer","ResizeObserver","observe","unobserve","zoomAmount","maxHeight","maxWidth","style","a","b","selectedBox","updateField","field","transform","value","target","newBox","text","newBoxes","map","ii","deleteBox","filter","undefined","backgroundImage","backgroundPosition","backgroundSize","className","styles","editor","htmlFor","id","onChange","parseInt","box","type","max","min","step","e","parseFloat","toFixed","onClick","imageWrapper","ref","Consumer","zoom","setZoom","generateStyle","localWidth","localHeight","offsetLeft","offsetTop","left","top","ScrollBox","setX","setY","drag","setDrag","offsetX","setOffsetX","offsetY","setOffsetY","onMouseMove","clientX","clientY","boxWidth","boxHeight","speedX","newX","newY","onMouseUp","window","addEventListener","removeEventListener","scrollbox","onMouseDown","Navigator","setRatio","setNaturalHeight","setNaturalWidth","navigatorRef","imageRef","setLocalHeight","setLocalWidth","setOffsetLeft","setOffsetTop","navigator","element","lh","lw","nh","nw","ol","ot","header","title","disabledSelector","selector","icon","src","alt","boxX","boxY","renderActiveBox","Viewer","ratio","setWidth","setHeight","select","setSelect","selectX","setSelectX","selectY","setSelectY","selectWidth","setSelectWidth","selectHeight","setSelectHeight","mode","setMode","activeSelector","viewer","draw","join","selectTop","selectLeft","concat","Math","abs","length","renderSelect","i","index","classes","push","active","selectBox","renderBox","Transcription","urn","xml","setXml","children","viewerState","setViewerState","Provider","format","n","renderPlainXml","xmlContainer","line","bracket","attribute","equals","attributeText","xmlBoxText","attr","escaped","replace","extractJson","key","forEach","node","$","facs","split","_","$$","Object","keys","newKey","Xml","json","parseString","explicitChildren","_err","result","xmlToJson","clipboard","writeText","xmlFullText","handleKeyDown","Home","fun","setImage","setUrn","aceRef","match","exec","components","onKeyDown","placeholder","aria-label","aria-describedby","name","theme","tabSize","showPrintMargin","editorProps","$blockScrolling","disabled","visitPage","copyUrl","pasteUrl","editTranscription","TranscriptionContainer","transcription","HomeContainer","role","App","ReactDOM","render","StrictMode","document","getElementById","onbeforeunload"],"mappings":"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","file":"static/js/main.3f2c7b76.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__2aEyo\",\"imageWrapper\":\"Editor_imageWrapper__1uBBC\",\"image\":\"Editor_image__1qFHM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"xml\":\"Xml_xml__1n50u\",\"text\":\"Xml_text__lxAvP\",\"xmlContainer\":\"Xml_xmlContainer__3DNOU\",\"line\":\"Xml_line__2gipS\",\"active\":\"Xml_active__1XIyg\",\"bracket\":\"Xml_bracket__rKg-A\",\"element\":\"Xml_element__3P9um\",\"attribute\":\"Xml_attribute__n_pW3\",\"equals\":\"Xml_equals__3aNET\",\"attributeText\":\"Xml_attributeText__2X5Ok\",\"container\":\"Xml_container__10zgJ\",\"header\":\"Xml_header__1n-tn\",\"editor\":\"Xml_editor__134Xj\",\"selector\":\"Xml_selector__1dO1X\",\"icon\":\"Xml_icon__pqd8K\",\"activeSelector\":\"Xml_activeSelector__3b8oc\",\"disabledSelector\":\"Xml_disabledSelector__2iDGH\"};","import { createContext } from 'react';\n\nconst TranscriptionContext = createContext();\n\nTranscriptionContext.displayName = 'TranscriptionContext';\n\nexport default TranscriptionContext;\n","import Editor from './Editor';\n\nexport default Editor;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport styles from './Editor.module.css';\n\nconst min = (a, b) => (\n  a < b ? a : b\n);\n\nconst Editor = ({ image, x, y, width, height, boxes, setBoxes, activeBox, setActiveBox, naturalHeight, naturalWidth }) => {\n  const containerRef = useRef(null);\n  const [containerHeight, setContainerHeight] = useState(null);\n  const [containerWidth, setContainerWidth] = useState(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n\n    const resize = () => {\n      const ch = container.clientHeight;\n      const cw = container.clientWidth;\n\n      setContainerHeight(ch);\n      setContainerWidth(cw);\n    };\n\n    resize();\n\n    const observer = new ResizeObserver(resize);\n    observer.observe(container);\n\n    return () => {\n      observer.unobserve(container);\n    };\n  }, []);\n\n  const selectedBox = activeBox === null ? null : boxes[activeBox];\n\n  const updateField = (field, { target: { value }}, transform) => {\n    const newBox = {\n      x: selectedBox.x,\n      y: selectedBox.y,\n      height: selectedBox.height,\n      width: selectedBox.width,\n      text: selectedBox.text,\n    }\n    newBox[field] = transform ? transform(value) : value;\n    const newBoxes = boxes.map((b, ii) => ii === activeBox ? newBox : b);\n\n    setBoxes(newBoxes);\n  };\n\n  const deleteBox = () => {\n    const newBoxes = boxes.filter((b, ii) => ii === activeBox ? false : true);\n\n    setBoxes(newBoxes);\n    setActiveBox(null);\n  };\n\n  let zoomAmount;\n  let maxHeight;\n  let maxWidth;\n  let style;\n\n  if (selectedBox !== null && selectedBox !== undefined) {\n    zoomAmount = min(containerWidth / (selectedBox.width * naturalWidth), containerHeight / (selectedBox.height * naturalHeight));\n    maxHeight = containerWidth * selectedBox.height * naturalHeight / (selectedBox.width * naturalWidth);\n    maxWidth = containerHeight * selectedBox.width * naturalWidth / (selectedBox.height * naturalHeight);\n\n    style = {\n      backgroundImage: `url(${image})`,\n      backgroundPosition: `-${selectedBox.x *  naturalWidth * zoomAmount}px -${selectedBox.y * naturalHeight * zoomAmount}px`,\n      backgroundSize: `${naturalWidth * zoomAmount}px`,\n      maxHeight: `${maxHeight}px`,\n      maxWidth: `${maxWidth}px`,\n    }\n  }\n\n  const renderForm = () => (\n    <>\n      <div className=\"form-row\">\n        <div className=\"form-group col-md-3\">\n          <label htmlFor=\"inputX\">X</label>\n          <input type=\"number\" id=\"inputX\" className=\"form-control\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('x', e, parseFloat)} value={selectedBox.x.toFixed(4) || '0'} />\n        </div>\n        <div className=\"form-group col-md-3\">\n          <label htmlFor=\"inputWidth\">Width</label>\n          <input type=\"number\" id=\"inputWidth\" className=\"form-control\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('width', e, parseFloat)} value={selectedBox.width.toFixed(4) || '0'} />\n        </div>\n        <div className=\"form-group col-md-3\">\n          <label htmlFor=\"inputY\">Y</label>\n          <input type=\"number\" id=\"inputY\" className=\"form-control\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('y', e, parseFloat)} value={selectedBox.y.toFixed(4) || '0'} />\n        </div>\n        <div className=\"form-group col-md-3\">\n          <label htmlFor=\"inputHeight\">Height</label>\n          <input type=\"number\" id=\"inputHeight\" className=\"form-control\" max=\"1\" min=\"0\" step=\"0.0001\" onChange={(e) => updateField('height', e, parseFloat)} value={selectedBox.height.toFixed(4) || '0'} />\n        </div>\n      </div>\n      <div className=\"form-row\">\n        <div className=\"form-group col-md-8\">\n          <label htmlFor=\"inputText\">Text</label>\n          <input type=\"text\" className=\"form-control\" id=\"inputText\" onChange={(e) => updateField('text', e)} value={selectedBox.text || ''} />\n        </div>\n        <div className=\"form-group col-md-4\">\n          <label>Delete</label>\n          <input type=\"button\" id=\"deleteText\" className=\"btn btn-danger form-control\" onClick={deleteBox} value=\"Delete\" />\n        </div>\n      </div>\n    </>\n  );\n\n  return (\n    <div className={styles.editor}>\n      <div>\n        <form className=\"mr-4 ml-4 mt-2\">\n          <div className=\"form-group\">\n            <label htmlFor=\"selectActive\">Select active</label>\n            <select className=\"form-control\" id=\"selectActive\" value={activeBox === null ? '' : activeBox} onChange={({ target: { value }}) => setActiveBox(value === '' ? null : parseInt(value))}>\n              <option value=\"\">-</option>\n              {boxes.map((box, ii) => <option key={ii} value={ii}>{ii + 1}{boxes[ii].text !== undefined ? ` - ${boxes[ii].text}` : ''}</option>)}\n            </select>\n          </div>\n          {(selectedBox !== null && selectedBox !== undefined) && renderForm()}\n        </form>\n      </div>\n      <div className={styles.imageWrapper} ref={containerRef}>\n        {(selectedBox !== null) && (\n          <div style={style} className={styles.image} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Editor;\n","import Editor from './Editor';\n\nexport default Editor;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Editor from '../../Editor';\n\nconst EditorWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ image, x, y, width, height, boxes, setBoxes, zoom, setZoom, activeBox, setActiveBox, naturalHeight, naturalWidth }) => <Editor image={image} x={x} y={y} width={width} height={height} boxes={boxes} setBoxes={setBoxes} zoom={zoom} setZoom={setZoom} activeBox={activeBox} setActiveBox={setActiveBox} naturalHeight={naturalHeight} naturalWidth={naturalWidth} />}\n  </TranscriptionContext.Consumer>\n);\n\nexport default EditorWithContext;\n","import React, { useEffect, useState } from 'react';\n\nimport styles from './ScrollBox.module.css';\n\nconst max = (a, b) => (\n  a > b ? a : b\n);\n\nconst min = (a, b) => (\n  a < b ? a : b\n);\n\nconst generateStyle = (x, y, zoom, width, height, localWidth, localHeight, offsetLeft, offsetTop) => {\n  // The way that CSS background images work is that the `width` is always\n  // equivalent to 100% of the image (when `background-size` is `100%`) but the\n  // height may be less.\n  // To calculate what the size of the scrollbox should be, we can just use 100%\n  // for the width (and adjust it based on zoom).\n  // For the height, we can figure out the percentage of the height that make up\n  // the width and multiply that by 100% (adjusted based on zoom).\n  // We can calculate `x` and `y` by finding the ratio between the width and\n  // localWidth and multiplying `x` and `y` by that value.\n\n  if (!width) {\n    return {};\n  }\n\n  return {\n    left: x * (localWidth / width) + offsetLeft,\n    top: y * (localWidth / width) + offsetTop,\n    width: `${min(localWidth / zoom, localWidth)}px`,\n    height: `${min(((height / zoom) / width) * localWidth, localHeight)}px`,\n  };\n};\n\nconst ScrollBox = ({ x, y, zoom, width, height, localWidth, localHeight, offsetLeft, offsetTop, setX, setY }) => {\n  const [drag, setDrag] = useState(false);\n  const [offsetX, setOffsetX] = useState(null);\n  const [offsetY, setOffsetY] = useState(null);\n\n  const onMouseMove = ({ clientX, clientY }) => {\n    if (drag) {\n      const boxWidth = localWidth / zoom;\n      const boxHeight = ((height / zoom) / width) * localWidth;\n\n      const speedX = ((offsetLeft * 2) + localWidth) / localWidth;\n\n      const newX = min(max(clientX * speedX - offsetX, 0), max((localWidth - boxWidth) * (width / localWidth), 0));\n      const newY = min(max(clientY * speedX - offsetY, 0), max((localHeight - boxHeight) * (width / localWidth), 0));\n\n      setX(newX);\n      setY(newY);\n    }\n  };\n\n  const onMouseDown = ({ clientX, clientY }) => {\n    const speedX = ((offsetLeft * 2) + localWidth) / localWidth;\n\n    setOffsetX(clientX * speedX - x);\n    setOffsetY(clientY * speedX - y);\n\n    setDrag(true);\n  };\n\n  useEffect(() => {\n    const onMouseUp = () => setDrag(false);\n\n    window.addEventListener('mouseup', onMouseUp);\n\n    return () => {\n      window.removeEventListener('mouseup', onMouseUp)\n    }\n  }, [setDrag])\n\n  useEffect(() => {\n    window.addEventListener('mousemove', onMouseMove);\n\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove)\n    }\n  }, [drag])\n\n  useEffect(() => {\n    const boxWidth = localWidth / zoom;\n    const boxHeight = ((height / zoom) / width) * localWidth;\n\n    const newX = min(max(x, 0), max((localWidth - boxWidth) * (width / localWidth), 0));\n    const newY = min(max(y, 0), max((localHeight - boxHeight) * (width / localWidth), 0));\n\n    if (newX !== x || newY !== y) {\n      setX(newX);\n      setY(newY);\n    }\n  }, [localHeight, localWidth, offsetLeft, offsetTop, zoom])\n\n  return (\n    <div\n      style={generateStyle(x, y, zoom, width, height, localWidth, localHeight, offsetLeft, offsetTop)}\n      className={styles.scrollbox}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n\nexport default ScrollBox;\n","import ScrollBox from './ScrollBox';\n\nexport default ScrollBox;\n","import Navigator from './Navigator';\n\nexport default Navigator;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { ZoomIn, ZoomOut } from 'react-feather';\n\nimport Scrollbox from './ScrollBox';\n\nimport styles from './Navigator.module.css';\n\nconst Navigator = ({ image, x, y, zoom, width, height, setX, setY, setRatio, setZoom, setNaturalHeight, setNaturalWidth, boxes, activeBox }) => {\n  const navigatorRef = useRef(null);\n  const imageRef = useRef(null);\n  const [localHeight, setLocalHeight] = useState(null);\n  const [localWidth, setLocalWidth] = useState(null);\n  const [offsetLeft, setOffsetLeft] = useState(null);\n  const [offsetTop, setOffsetTop] = useState(null);\n\n  useEffect(() => {\n    const navigator = navigatorRef.current;\n    const element = imageRef.current;\n\n    const resize = () => {\n      const lh = element.clientHeight;\n      const lw = element.clientWidth;\n      const nh = element.naturalHeight;\n      const nw = element.naturalWidth;\n      const ol = element.offsetLeft;\n      const ot = element.offsetTop;\n\n      setLocalHeight(lh);\n      setLocalWidth(lw);\n      setNaturalHeight(nh);\n      setNaturalWidth(nw);\n      setOffsetLeft(ol);\n      setOffsetTop(ot);\n      setRatio(lh / lw);\n    };\n\n    resize();\n\n    const observer = new ResizeObserver(resize);\n    observer.observe(navigator);\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(navigator);\n      observer.unobserve(element);\n    };\n  }, [setNaturalHeight, setNaturalWidth, setRatio]);\n\n  const renderActiveBox = () => {\n    const { x: boxX, y: boxY, width: boxWidth, height: boxHeight } = boxes[activeBox];\n\n    const style = {\n      top: `${boxY * localHeight + offsetTop}px`,\n      left: `${boxX * localWidth + offsetLeft}px`,\n      width: `${boxWidth * localWidth}px`,\n      height: `${boxHeight * localHeight}px`,\n    };\n\n    return (\n      <div\n        className={styles.activeBox}\n        style={style}\n      />\n    );\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div title=\"Zoom in\" className={zoom >= 9.99 ? styles.disabledSelector : styles.selector} onMouseDown={zoom >= 9.99 ? null : () => setZoom(zoom + 0.2)}>\n          <ZoomIn className={styles.icon} />\n        </div>\n\n        <div title=\"Zoom out\" className={zoom <= 1.01 ? styles.disabledSelector : styles.selector} onMouseDown={zoom <= 1.01 ? null : () => setZoom(zoom - 0.2)}>\n          <ZoomOut className={styles.icon} />\n        </div>\n      </div>\n      <div className={styles.navigator} ref={navigatorRef}>\n        <img src={image} ref={imageRef} className={styles.image} alt=\"miniature used for navigation\" />\n        {(activeBox !== undefined && activeBox !== null) ? renderActiveBox() : false}\n        <Scrollbox x={x} y={y} zoom={zoom} width={width} height={height} localHeight={localHeight} localWidth={localWidth} setX={setX} setY={setY} offsetLeft={offsetLeft} offsetTop={offsetTop} />\n      </div>\n    </div>\n  );\n};\n\nexport default Navigator;\n","import Navigator from './Navigator';\n\nexport default Navigator;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Navigator from '../../Navigator';\n\nconst NavigatorWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ image, x, y, zoom, height, width, setX, setY, setRatio, setZoom, setNaturalHeight, setNaturalWidth, boxes, activeBox }) => (\n      <Navigator image={image} x={x} y={y} zoom={zoom} height={height} width={width} setX={setX} setY={setY} setRatio={setRatio} setZoom={setZoom} setNaturalHeight={setNaturalHeight} setNaturalWidth={setNaturalWidth} boxes={boxes} activeBox={activeBox} />\n    )}\n  </TranscriptionContext.Consumer>\n);\n\nexport default NavigatorWithContext;\n","import Viewer from './Viewer';\n\nexport default Viewer;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { MousePointer, Maximize } from 'react-feather';\n\nimport styles from './Viewer.module.css';\n\nconst Viewer = ({ image, x, y, width, height, zoom, boxes, ratio, setWidth, setHeight, setBoxes, activeBox, setActiveBox }) => {\n  const [select, setSelect] = useState(false);\n  const [selectX, setSelectX] = useState(null);\n  const [selectY, setSelectY] = useState(null);\n  const [selectWidth, setSelectWidth] = useState(0);\n  const [selectHeight, setSelectHeight] = useState(0);\n  const [offsetX, setOffsetX] = useState(0);\n  const [offsetY, setOffsetY] = useState(0);\n  const [mode, setMode] = useState('draw'); // draw, select\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const element = ref.current;\n    const resize = () => {\n      const height = element.clientHeight;\n      const width = element.clientWidth;\n\n      setHeight(height);\n      setWidth(width);\n      setOffsetX(element.offsetLeft);\n      setOffsetY(element.offsetTop);\n    };\n    const observer = new ResizeObserver(resize);\n\n    resize();\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(element);\n    };\n  }, []);\n\n  const renderBox = ({ x: boxX, y: boxY, width: boxWidth, height: boxHeight }, index) => {\n    const style = {\n      top: `${boxY * ratio * width * zoom - y * zoom}px`,\n      left: `${boxX * width * zoom - x * zoom}px`,\n      width: `${boxWidth * width * zoom}px`,\n      height: `${boxHeight * ratio * width * zoom}px`,\n    };\n    const classes = [styles.box];\n    if (index === activeBox) {\n      classes.push(styles.active);\n    }\n    if (mode === 'select' && index !== activeBox) {\n      classes.push(styles.selectBox);\n    }\n\n    return (\n      <div\n        key={index}\n        className={classes.join(' ')}\n        onMouseDown={mode === 'select' ? () => { setActiveBox(index) }: null}\n        style={style}\n      />\n    );\n  };\n\n  const onMouseUp = () => {\n    if (!selectHeight || !selectWidth) {\n      setSelect(false);\n      return;\n    }\n\n    const selectTop = selectHeight < 0 ? selectY + selectHeight : selectY;\n    const selectLeft = selectWidth < 0 ? selectX + selectWidth : selectX;\n\n    const newBoxes = boxes.concat({\n      y: (selectTop + y * zoom) / (width * ratio * zoom),\n      x: (selectLeft + x * zoom) / (width * zoom),\n      height: Math.abs(selectHeight) / (width * ratio * zoom),\n      width: Math.abs(selectWidth) / (width * zoom),\n    });\n\n    setBoxes(newBoxes);\n    setSelect(false);\n    setSelectWidth(null);\n    setSelectHeight(null);\n    setActiveBox(newBoxes.length - 1);\n  };\n\n  const renderSelect = () => {\n    if (!select) {\n      return false;\n    }\n\n    const selectTop = selectHeight < 0 ? selectY + selectHeight : selectY;\n    const selectLeft = selectWidth < 0 ? selectX + selectWidth : selectX;\n\n    const style = {\n      top: selectTop,\n      left: selectLeft,\n      height: `${Math.abs(selectHeight)}px`,\n      width: `${Math.abs(selectWidth)}px`,\n    };\n\n    return (\n      <div\n        style={style}\n        className={styles.select}\n      />\n    );\n  };\n\n  const onMouseMove = ({ clientX, clientY }) => {\n    if (select) {\n      setSelectWidth(clientX - selectX - offsetX);\n      setSelectHeight(clientY - selectY - offsetY);\n    }\n  };\n\n  const onMouseDown = ({ clientX, clientY }) => {\n    setSelectX(clientX - offsetX);\n    setSelectY(clientY - offsetY);\n\n    setSelect(true);\n  };\n\n  const style = {\n    backgroundImage: `url(${image})`,\n    backgroundPosition: `-${zoom * x}px -${zoom * y}px`,\n    backgroundSize: `${zoom * 100}%`,\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div title=\"Select the active box\" className={mode === 'select' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'select' ? null : () => setMode('select')}>\n          <MousePointer className={styles.icon} />\n        </div>\n\n        <div title=\"Draw a new box\" className={mode === 'draw' ? styles.activeSelector : styles.selector} onMouseDown={mode === 'draw' ? null : () => setMode('draw')}>\n          <Maximize className={styles.icon} />\n        </div>\n      </div>\n      <div\n        ref={ref}\n        className={mode === 'draw' ? [styles.viewer, styles.draw].join(' ') : styles.viewer}\n        style={style}\n        onMouseDown={mode === 'draw' ? onMouseDown : null}\n        onMouseMove={mode === 'draw' ? onMouseMove : null}\n        onMouseUp={mode === 'draw' ? onMouseUp : null}\n      >\n        {renderSelect()}\n        {boxes.map((b, i) => renderBox(b, i))}\n      </div>\n    </div>\n  );\n};\n\nexport default Viewer;\n","import Viewer from './Viewer';\n\nexport default Viewer;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Viewer from '../../Viewer';\n\nconst ViewerWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ image, x, y, width, height, ratio, zoom, boxes, setWidth, setHeight, setBoxes, activeBox, setActiveBox }) => <Viewer image={image} x={x} y={y} width={width} height={height} zoom={zoom} ratio={ratio} boxes={boxes} setWidth={setWidth} setHeight={setHeight} setBoxes={setBoxes} activeBox={activeBox} setActiveBox={setActiveBox} />}\n  </TranscriptionContext.Consumer>\n);\n\nexport default ViewerWithContext;\n","import Transcription from './Transcription';\n\nexport default Transcription;\n","import React, { useState } from 'react';\n\nimport TranscriptionContext from './transcription-context';\n\nimport './Transcription.css';\n\nconst Transcription = ({ image, urn, xml, setXml, className, children }) => {\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [naturalHeight, setNaturalHeight] = useState(0);\n  const [naturalWidth, setNaturalWidth] = useState(0);\n  const [ratio, setRatio] = useState(1);\n  const [zoom, setZoom] = useState(2);\n  const [viewerState, setViewerState] = useState('draw'); // draw, select\n  const [activeBox, setActiveBox] = useState(null);\n  const [boxes, setBoxes] = useState([])\n\n  return (\n    <TranscriptionContext.Provider value={{ image, x, y, zoom, height, width, ratio, boxes, setX, setY, setZoom, setHeight, setWidth, setRatio, setBoxes, viewerState, setViewerState, activeBox, setActiveBox, urn, xml, setXml, naturalHeight, naturalWidth, setNaturalHeight, setNaturalWidth }}>\n      <div className={className}>\n        {children}\n      </div>\n    </TranscriptionContext.Provider>\n  );\n};\n\nexport default Transcription;\n","import React, { useEffect } from 'react';\n\nimport styles from './Xml.module.css';\n\nimport { parseString } from 'xml2js';\nimport { Copy, Clipboard } from 'react-feather';\n\nconst format = ({ x, y, width, height }) => (\n  [x, y, width, height].map(n => n.toFixed(4)).join(',')\n);\n\nconst renderPlainXml = ({ urn, boxes, activeBox, setActiveBox }) => {\n  return (\n    <div className={styles.xmlContainer}>\n      <div className={styles.xml}>\n        {boxes.map(({ x, y, width, height, text }, ii) => (\n          <div key={ii} className={ii === activeBox ? [styles.active, styles.line].join(' ') : styles.line} onClick={() => setActiveBox(ii)}>\n            <span className={styles.bracket}>&lt;w</span>\n            {' '}\n            <span className={styles.element}>\n              <span className={styles.attribute}>facs</span><span className={styles.equals}>=</span>\n              <span className={styles.attributeText}>\n                {`\"${urn}@${format({ x, y, width, height })}\"`}\n              </span>\n            </span>\n            <span className={styles.bracket}>&gt;</span>\n            {text ? <br /> : false}\n            {text ? <>&nbsp;&nbsp;</> : false}\n            {text ? <span className={styles.text}>{text}</span> : false}\n            {text ? <br /> : false}\n            <span className={styles.bracket}>&lt;/w&gt;</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst xmlBoxText = (urn, boxes, activeBox) => {\n  const { x, y, width, height, text } = boxes[activeBox];\n  const attr = `\"${urn}@${format({ x, y, width, height })}\"`;\n  const escaped = text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n  return `<w facs=${attr}>${escaped}</w>`;\n};\n\nconst xmlFullText = (urn, boxes) => {\n  return boxes.map((_, ii) => xmlBoxText(urn, boxes, ii)).join('\\n');\n};\n\nconst xmlToJson = (xml) => {\n  let json;\n  parseString(xml, { explicitChildren: true }, (_err, result) => {\n    json = result;\n  });\n\n  return json;\n};\n\nconst extractJson = (key, children, boxes) => {\n  children.forEach((node) => {\n    if (key === 'w' && node.$ && node.$.facs) {\n      const nums = node.$.facs.split('@')[1];\n      const [x, y, width, height] = nums.split(',').map(parseFloat);\n\n      boxes.push({ x, y, width, height, text: node._ });\n    }\n\n    if (node.$$) {\n      Object.keys(node.$$).forEach((newKey) => {\n        extractJson(newKey, node.$$[newKey], boxes);\n      });\n    }\n  });\n};\n\nconst Xml = ({ urn, xml, setXml, boxes, setBoxes, activeBox, setActiveBox }) => {\n  useEffect(() => {\n    if (!xml) {\n      return;\n    }\n\n    const json = xmlToJson(xml)\n    const boxes = [];\n    Object.keys(json).forEach((element) => {\n      if (json[element].$$) {\n        Object.keys(json[element].$$).forEach((key) => {\n          extractJson(key, json[element].$$[key], boxes);\n        });\n      }\n    });\n    setBoxes(boxes);\n  }, [xml]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div title=\"Copy active line\" className={(activeBox === undefined || activeBox === null) ? styles.disabledSelector : styles.selector} onMouseDown={() => {navigator.clipboard.writeText(xmlBoxText(urn, boxes, activeBox))}}>\n          <Copy className={styles.icon} />\n        </div>\n        <div title=\"Copy all lines\" className={styles.selector} onMouseDown={() => {navigator.clipboard.writeText(xmlFullText(urn, boxes))}}>\n          <Clipboard className={styles.icon} />\n        </div>\n      </div>\n      {renderPlainXml({ urn, boxes, activeBox, setActiveBox })}\n    </div>\n  );\n};\n\nexport default Xml\n","import Xml from './Xml';\n\nexport default Xml;\n","import Xml from './Xml';\n\nexport default Xml;\n","import React from 'react';\n\nimport TranscriptionContext from '../transcription-context';\n\nimport Xml from '../../Xml';\n\nconst XmlWithContext = () => (\n  <TranscriptionContext.Consumer>\n    {({ boxes, setBoxes, activeBox, setActiveBox, urn, xml, setXml }) => <Xml boxes={boxes} setBoxes={setBoxes} activeBox={activeBox} setActiveBox={setActiveBox} urn={urn} xml={xml} setXml={setXml} />}\n  </TranscriptionContext.Consumer>\n);\n\nexport default XmlWithContext;\n","export default __webpack_public_path__ + \"static/media/copy-url.229e092a.png\";","export default __webpack_public_path__ + \"static/media/edit-transcription.62ebae99.png\";","export default __webpack_public_path__ + \"static/media/paste-url.2563f6c9.png\";","export default __webpack_public_path__ + \"static/media/visit-page.0bb9525d.png\";","import React, { useRef, useEffect } from 'react';\nimport AceEditor from 'react-ace';\n\nimport copyUrl from './copy-url.png';\nimport editTranscription from './edit-transcription.png';\nimport pasteUrl from './paste-url.png';\nimport visitPage from './visit-page.png';\n\nimport 'ace-builds/src-noconflict/mode-xml';\nimport 'ace-builds/src-noconflict/theme-chrome';\nimport 'ace-builds/webpack-resolver';\n\nconst handleKeyDown = () => {};\n\nconst handleChangeFun = (fun) => (\n  ({ target: { value } }) => fun(value)\n);\n\nconst Home = ({ image, setImage, urn, setUrn, mode, setMode, xml, setXml }) => {\n  const aceRef = useRef(null);\n\n  const handleImageChange = ({ target: { value } }) => {\n    const components = (value || '').split(/[./]/);\n\n    if (components.length > 1 && urn === 'urn:cite:perseus:miscellanyimgs:image') {\n      setUrn(`urn:cite:perseus:miscellanyimgs:${components[components.length - 2]}`);\n    }\n\n    setImage(value)\n  };\n\n  useEffect(() => {\n    if (!xml) {\n      return;\n    }\n\n    const regex = /<w facs=\"(.+?)@0.+?\">/;\n    const match = regex.exec(xml);\n\n    if (match && match[1]) {\n      setUrn(match[1]);\n    }\n  }, [xml, setUrn]);\n\n  return (\n    <>\n      <header>\n        <div className=\"row pt-4\">\n          <div className=\"col\">\n            <h1 className=\"h3\">\n              Transcription Editor\n            </h1>\n            <h2 className=\"h6\">\n              EpiDoc XML helper for image transcription\n            </h2>\n          </div>\n        </div>\n      </header>\n      <div className=\"row pt-2\">\n        <div className=\"col col-lg-10 offset-lg-1\">\n\n          <div className=\"input-group input-group-lg pb-2\">\n            <div className=\"input-group-prepend\">\n              <span className=\"input-group-text\" id=\"image-input-group\">Image:</span>\n            </div>\n            <input className=\"form-control\" type=\"text\" value={image} onChange={handleImageChange} onKeyDown={handleKeyDown} placeholder=\"Link to image ...\" aria-label=\"URL\" aria-describedby=\"image-input-group\" />\n          </div>\n\n          <div className=\"input-group input-group-lg pb-2\">\n            <div className=\"input-group-prepend\">\n              <span className=\"input-group-text\" id=\"urn-input-group\">URN:</span>\n            </div>\n            <input className=\"form-control\" type=\"text\" value={urn} onChange={handleChangeFun(setUrn)} onKeyDown={handleKeyDown} placeholder=\"Unique identifier (optional) ...\" aria-label=\"URL\" aria-describedby=\"image-input-group\" />\n          </div>\n\n          <div className=\"input-group input-group-lg pb-2\">\n            <label htmlFor=\"xml\">Transcription XML (optional):</label>\n            <AceEditor\n              ref={aceRef}\n              mode=\"xml\"\n              name=\"xml\"\n              theme=\"chrome\"\n              tabSize={2}\n              className=\"border rounded\"\n              height=\"40vh\"\n              width=\"100%\"\n              showPrintMargin={false}\n              editorProps={{ $blockScrolling: true }}\n              onChange={(x) => setXml(x)}\n            />\n          </div>\n\n          <button className=\"btn btn-block btn-primary\" disabled={!image} onMouseDown={image ? () => { setMode('edit') } : () => {}}>\n            Edit transcription\n          </button>\n        </div>\n      </div>\n      <hr />\n      <div className=\"row pt-2\">\n        <div className=\"col\">\n          <h3 className=\"h4\">\n            Getting started\n          </h3>\n        </div>\n      </div>\n      <div className=\"row pt-2 mb-4 pb-2\">\n        <div className=\"col-md-3\">\n          <img src={visitPage} className=\"img-fluid border\" alt=\"treebank template page\" />\n          <p className=\"text-left pt-2\">\n            1. Visit the page with the image you're transcribing.\n          </p>\n        </div>\n        <div className=\"col-md-3\">\n          <img src={copyUrl} className=\"img-fluid border\" alt=\"treebank template page\" />\n          <p className=\"text-left pt-2\">\n            2. Copy the URL.\n          </p>\n        </div>\n        <div className=\"col-md-3\">\n          <img src={pasteUrl} className=\"img-fluid border\" alt=\"treebank template page\" />\n          <p className=\"text-left pt-2\">\n            3. Paste the URL in the &quot;Image&quot; input and paste any XML you have in the &quot;XML&quot; input.\n          </p>\n        </div>\n        <div className=\"col-md-3\">\n          <img src={editTranscription} className=\"img-fluid border\" alt=\"treebank template page\" />\n          <p className=\"text-left pt-2\">\n            4. Click the &quot;Edit transcription&quot; button.\n          </p>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n","import Home from './Home';\n\nexport default Home;\n","import React, { useState } from 'react';\nimport { PerseidsHeader, PerseidsFooter } from 'perseids-react-components';\n\nimport Editor from '../Transcription/Editor';\nimport Navigator from '../Transcription/Navigator';\nimport Viewer from '../Transcription/Viewer';\nimport Transcription from '../Transcription';\nimport Xml from '../Transcription/Xml';\n\nimport Home from '../Home';\n\nimport styles from './App.module.css';\n\nconst TranscriptionContainer = ({ urn, setUrn, image, xml, setXml }) => (\n  <Transcription className={styles.transcription} urn={urn} image={image} xml={xml} setXml={setXml}>\n    <Viewer />\n    <Editor />\n    <Navigator />\n    <Xml />\n  </Transcription>\n);\n\nconst HomeContainer = ({ xml, setXml, urn, setUrn, image, setImage, mode, setMode }) => (\n  <>\n    <PerseidsHeader>\n      Transcription Editor\n    </PerseidsHeader>\n    <main role=\"main\">\n      <div className=\"container text-center\">\n        <Home xml={xml} setXml={setXml} urn={urn} setUrn={setUrn} image={image} setImage={setImage} mode={mode} setMode={setMode} />;\n      </div>\n    </main>\n    <PerseidsFooter />\n  </>\n);\n\nconst App = () => {\n  const [xml, setXml] = useState('');\n  const [urn, setUrn] = useState('urn:cite:perseus:miscellanyimgs:image');\n  const [image, setImage] = useState('');\n  const [mode, setMode] = useState('input'); // input, edit\n\n  if (mode === 'input') {\n    return <HomeContainer xml={xml} setXml={setXml} urn={urn} setUrn={setUrn} image={image} setImage={setImage} mode={mode} setMode={setMode} />;\n  }\n\n  return <TranscriptionContainer urn={urn} setUrn={setUrn} image={image} xml={xml} setXml={setXml} />\n};\n\n\nexport default App;\n","import App from './App';\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'perseids-react-components/build/css/index.css';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nwindow.onbeforeunload = function() { return true; };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Viewer_container__3i4A8\",\"viewer\":\"Viewer_viewer__1Spx5\",\"draw\":\"Viewer_draw__2gOsn\",\"box\":\"Viewer_box__3pcwy\",\"selectBox\":\"Viewer_selectBox__BhI5r\",\"active\":\"Viewer_active__3yomw\",\"select\":\"Viewer_select__il19s\",\"header\":\"Viewer_header__34LO6\",\"selector\":\"Viewer_selector__24MV2\",\"disabledSelector\":\"Viewer_disabledSelector__2KL_J\",\"activeSelector\":\"Viewer_activeSelector__2VkKS\",\"icon\":\"Viewer_icon__3g3GG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollbox\":\"ScrollBox_scrollbox__FX24s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"transcription\":\"App_transcription__1Qfh6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Navigator_container__2s-4C\",\"header\":\"Navigator_header__3xIOu\",\"navigator\":\"Navigator_navigator__3gcbv\",\"image\":\"Navigator_image__3ITwa\",\"selector\":\"Navigator_selector__2Owvv\",\"disabledSelector\":\"Navigator_disabledSelector__Fu-Qq\",\"icon\":\"Navigator_icon__2ZdME\",\"activeBox\":\"Navigator_activeBox__3V3wT\"};"],"sourceRoot":""}